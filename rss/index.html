<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0" xmlns:media="http://search.yahoo.com/mrss/"><channel><title><![CDATA[mymemoryleaks]]></title><description><![CDATA[Blog sur les technos Microsoft.]]></description><link>http://www.mymemoryleaks.fr/</link><image><url>http://www.mymemoryleaks.fr/favicon.png</url><title>mymemoryleaks</title><link>http://www.mymemoryleaks.fr/</link></image><generator>Ghost 1.21</generator><lastBuildDate>Mon, 02 Apr 2018 22:03:50 GMT</lastBuildDate><atom:link href="http://www.mymemoryleaks.fr/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[J'recommence, je git mon blog!]]></title><description><![CDATA[J'ai passÃ© 8 ans la-bas, sur blogger. Si je me souviens bien c'est Francois qui m'avais recommandÃ© cette plateforme.]]></description><link>http://www.mymemoryleaks.fr/on-recommence-je-git-mon-blog/</link><guid isPermaLink="false">5ac27ad4a9a75b30c4d00a70</guid><category><![CDATA[git]]></category><category><![CDATA[blog]]></category><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Mon, 02 Apr 2018 20:20:21 GMT</pubDate><media:content url="http://www.mymemoryleaks.fr/content/images/2018/04/github-1.png" medium="image"/><content:encoded><![CDATA[<div class="kg-card-markdown"><img src="http://www.mymemoryleaks.fr/content/images/2018/04/github-1.png" alt="J'recommence, je git mon blog!"><p>J'ai passÃ© 8 ans la-bas, sur <a href="http://mymemoryleaks.blogspot.fr/">blogger</a>. Si je me souviens bien c'est <a href="https://fjehl.wordpress.com/">Francois</a> qui m'avais recommandÃ© cette plateforme. Puis le temps Ã  passÃ©, FranÃ§ois comme beaucoup d'autres ont bougÃ© vers d'autres horizons, <a href="https://fr.wordpress.org/">wordpress</a> par exemple.</p>
<p>Pas moi... un peu par flemme, faut bien le dire.</p>
<p>Parfois l'idÃ©e et l'envie de pondre un article est la, mais compliquÃ© de le faire dans le train car faut etre connectÃ© sur <a href="https://www.blogger.com/">blogger.com</a> pour pouvoir Ã©crire. D'autres problÃ©matiques se font sentir, ou stocker les images/screenshots etc...</p>
<p>Bref, il etait temps de demenager. Mais pour aller ou?</p>
<p>J'en ai parlÃ© Ã  mes collÃ¨gues chez mon <a href="https://www.younited-credit.com/">client actuel</a>. J'voulais un truc light, facile Ã  heberger, avec lequel je pouvais travailler en mode dÃ©connectÃ©. On a parlÃ© de <a href="https://ghost.org/fr/">Ghost</a>, de <a href="https://jekyllrb.com/">Jekyll</a>, et puis des modes d'hÃ©bergement. Et la ca a fait tilt quand <a href="https://fr.linkedin.com/in/hocquet">Anthony</a> m'a rappelÃ© qu'il y avait les <a href="https://pages.github.com/">github pages</a>. En deux mots, un repository git qui est exposÃ© comme un site web.<br>
Merci encore pour le brainstorming mon grand!</p>
<p>D'ailleurs dans un prochain billet, je dÃ©taillerai la solution technique derriÃ¨re ce blog, et comment j'ai rapatriÃ© tous les posts depuis mon ancienne plateforme.<br>
Ho, j'oubliais, <a href="https://pages.github.com/">github pages</a> est si smart que j'ai mÃªme pu investir dans un <a href="http://www.mymemoryleaks.fr/">nom de domaine</a> (deux en rÃ©alitÃ©) et l'affecter Ã  ce repository git.</p>
<p>Me revoilÃ  donc, sous une nouvelle forme visuelle mais comme avant, pour partager mes pÃ©rÃ©grinations autours des technos <a href="https://www.microsoft.com">Microsoft</a>.</p>
</div>]]></content:encoded></item><item><title><![CDATA[DÃ©ployer un webjob avec VSTS]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Si vous avez dÃ©jÃ  eu besoin de dÃ©ployer un <a href="https://docs.microsoft.com/fr-fr/azure/app-service/web-sites-create-web-jobs">azure webjob</a> via vsts, vous avez du tomber sur ce <a href="https://medium.com/@thomashellstrom/building-azure-webjobs-in-vsts-4306e141df49">bon blog post de Thomas HellstrÃ¸m</a>. NÃ©anmoins, en suivant telles quelles les instructions de notre ami Thomas, vous risquer de casser la webapp qui host votre webjob.</p>
<p>Ce blog post va</p></div>]]></description><link>http://www.mymemoryleaks.fr/deployer-un-webjob-avec-vsts/</link><guid isPermaLink="false">5a99b626f336bf15fc91af81</guid><category><![CDATA[VSTS]]></category><category><![CDATA[WebJob]]></category><category><![CDATA[Azure]]></category><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Fri, 09 Feb 2018 22:52:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>Si vous avez dÃ©jÃ  eu besoin de dÃ©ployer un <a href="https://docs.microsoft.com/fr-fr/azure/app-service/web-sites-create-web-jobs">azure webjob</a> via vsts, vous avez du tomber sur ce <a href="https://medium.com/@thomashellstrom/building-azure-webjobs-in-vsts-4306e141df49">bon blog post de Thomas HellstrÃ¸m</a>. NÃ©anmoins, en suivant telles quelles les instructions de notre ami Thomas, vous risquer de casser la webapp qui host votre webjob.</p>
<p>Ce blog post va prendre la tournure dâ€™une recette de cuisine, dâ€™un pense bÃªte ; cela mâ€™Ã©vitera de me reposer la mÃªme question dans quelques mois, et j'espÃ¨re secrÃ¨tement que cela puisse aider certains d'entre vous.</p>
<p>On commence donc par utiliser la fonction Â« Publish as Azure Webjob Â» Ã  partir de Visual Studio 2017.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=1oxmVOgeleLcE0HoiBmqXgw4NdZPzV1f6" alt=""></p>
<p>Pas la peine dâ€™aller au bout du deploy, ce tool va ajouter le package nuget <a href="https://www.nuget.org/packages/Microsoft.Web.WebJobs.Publish/">Microsoft.Web.WebJobs.Publish</a> et crÃ©er le fichier Â« webjob-publish-settinps.json Â» dans le rÃ©pertoire properties de votre projet.</p>
<p>On passe ensuite sur le build sur VSTS. Thomas nous propose de dÃ©finir les arguments suivants sur la tache msbuild :</p>
<pre><code class="language-ps1">/p:DeployOnBuild=true /p:WebPublishMethod=Package /p:PackageAsSingleFile=true /p:SkipInvalidConfigurations=true /p:Configuration=Release
</code></pre>
<p>Notez le paramÃ¨tre Â« /p:WebPublishMethod=Package Â», qui produira un fichier zip.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=1Y9grjF4l84j-rI2G-7wRxUalCeD3h2cJ" alt=""></p>
<p>Et en jetant un Å“il dans le fichier zip, mauvaise surprise, on est en train de packager le dossier bin avec des dll qui vont venir Ã©craser celles qui appartiennent Ã  la webapp.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=13Jx4y2OZzK3HOhF9C1Bnl7yMs6fs_-DQ" alt=""></p>
<p>Du coup jâ€™vous propose de corriger Ã§a.<br>
On commence par changer les arguments de la tache msbuild.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=1-t4EzYGYxTRwzM5iLDSSJzQSPEUDRs3L" alt=""></p>
<pre><code class="language-ps1">/p:DeployOnBuild=true /p:WebPublishMethod=FileSystem /p:publishUrl=&quot;$(build.artifactstagingdirectory)&quot; /p:DeployDefaultTarget=WebPublish
</code></pre>
<p>Ce qui va produire le mÃªme contenu que le fichier zip mais directement sur le systÃ¨me de fichier.</p>
<p>Puis on ajoute une tache delete file, qui se chargera de supprimer le dossier /bin que nous voulons Ã©viter de dÃ©ployer.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=13y7Jd2gEmFBlOKOeAr2EVsypWOf63FTZ" alt=""></p>
<p>Voila, cette fois ci nous y sommes. Jâ€™espÃ¨re que cela pourra vous aider!</p>
</div>]]></content:encoded></item><item><title><![CDATA[VSTS â€“ Quand yâ€™a plus de crÃ©dits, yâ€™en a encore.]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Ã‡a, câ€™est la poisse: <code>Your account has no free minutes remaining</code>.</p>
<p>Le scÃ©nario est Ã  se pendre, tu montes ton projet en intÃ©gration continue et aprÃ¨s quelques (dizaines) de commit tu te retrouves dans lâ€™impossibilitÃ© de complÃ©tera une PR ou juste vÃ©rifier que le dernier commit nâ€™a</p></div>]]></description><link>http://www.mymemoryleaks.fr/vsts-quand-ya-plus-de-credits-yen-a-encore/</link><guid isPermaLink="false">5a99b626f336bf15fc91af80</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Mon, 29 Jan 2018 23:14:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>Ã‡a, câ€™est la poisse: <code>Your account has no free minutes remaining</code>.</p>
<p>Le scÃ©nario est Ã  se pendre, tu montes ton projet en intÃ©gration continue et aprÃ¨s quelques (dizaines) de commit tu te retrouves dans lâ€™impossibilitÃ© de complÃ©tera une PR ou juste vÃ©rifier que le dernier commit nâ€™a pas introduit de rÃ©gressions.</p>
<p>Du coup je me propose de prÃ©senter ici, comment crÃ©er Ã  moindre frais un agent de build sur-vitaminÃ©. Et le fait dâ€™avoir une machine un peu costaud, nâ€™est pas un moindre mal ; qui ne sâ€™est pas arrachÃ© les cheveux en attendant que lâ€™agent de build hostÃ© veuille bien se lancer et faire son travailâ€¦ ?</p>
<p>PlutÃ´t que de crÃ©er nous mÃªme une vm, installer windows, msbuild et tout le nÃ©cessaire a un agent de build, on va plutÃ´t utiliser azure <a href="https://azure.microsoft.com/fr-fr/services/devtest-lab/">DevTest Lab</a>. Lâ€™idÃ©e est de tirer parti des template de vm qui sont mises a notre dispo.</p>
<p>AprÃ¨s avoir crÃ©Ã© votre premiÃ¨re instance DevTest lab, on ajoute une vm basÃ©e sur lâ€™image Visual Studio Community 2017 (latest release) on Windows Server 2016 (x64).</p>
<p><a href="https://drive.google.com/uc?export=download&amp;id=1yq-8OdL7oeffvZ-lsW8Ll01dy0n6g8KQ"><img src="https://drive.google.com/uc?export=download&amp;id=1yq-8OdL7oeffvZ-lsW8Ll01dy0n6g8KQ" alt=""></a></p>
<p>On va vous demander un login et un mot de passe pour le compte admin de la future vm.<br>
Je vous conseille de stocker votre mot de passe dans le coffre-fort Â« my secret Â» pour une plus grande sÃ©curitÃ©. (ce nâ€™est donc pas mon mot de passe que vous voyez ğŸ˜Š)</p>
<p>Bon il nous faut maintenant choisir les caractÃ©ristiques de la vm. Jâ€™ai optÃ© pour 32 GO de ram et 8 vcpu, une D8S_V3, elle ne sera allumÃ©e que quelques minutes le temps de faire le build, donc elle ne nous coutera pas bien cher.</p>
<p>Place aux artefacts, il convient de voir cela comme des scripts additionnels qui installeront dâ€™autres programmes/services sur votre vm. Ã‡a tombe bien, lâ€™artefact VSTS Build agent nous procure le service de build qui convient.</p>
<p><a href="https://drive.google.com/uc?export=download&amp;id=1uhrvXnuNP5G6U7X66SdH3tj7XSmK380K"><img src="https://drive.google.com/uc?export=download&amp;id=1uhrvXnuNP5G6U7X66SdH3tj7XSmK380K" alt=""></a></p>
<p>Quelques prÃ©cisions, le champs VSTS account name doit se conformer au pattern suivant : <code>https://{{vsts_account_name}}.visualstudio.com</code></p>
<p>Le secret correspond une clÃ© privÃ©e que vous pourrez crÃ©e en vous rendant Ã  lâ€™adresse <code>https://{{vsts_account_name}}.visualstudio.com/_details/security/tokens</code></p>
<p>Finalement, lâ€™agent pool doit Ãªtre un pool prÃ©-existant. A vÃ©rifier/crÃ©er ici : <code>https://{{vsts_account_name}}.visualstudio.com/_admin/_AgentPool</code></p>
<p>Petit plus, dans le cas ou vous envisagez de builder des projets front, profitez de cette Ã©tape pour ajouter lâ€™artefact NODE JS.</p>
<p>Bon, aller yâ€™a plus quâ€™a cliquer sur OK, attendre quelques minutes et lâ€™agent devrait apparaitre dans le pool que vous avez choisi.</p>
<p><a href="https://drive.google.com/uc?export=download&amp;id=1fLWtBjZ32fLL-ilmRq1GqPr3-dm8DK3j"><img src="https://drive.google.com/uc?export=download&amp;id=1fLWtBjZ32fLL-ilmRq1GqPr3-dm8DK3j" alt=""></a></p>
<p>Quoi quâ€™il en soit pas de panique, si vous vous Ãªtes trompÃ© sur un paramÃ¨tre des artefacts, il sera toujours possible de retenter lâ€™installation a postÃ©riori ou bien de procÃ©der a lâ€™installation manuellement.</p>
<p>Dernier point, si vos crÃ©dits azure ne vous permettent pas de laisser cette vm allumÃ©e tout le temps, voici deux petites commandes qui vous permettront dâ€™allumer et dâ€™Ã©teindre la vm a volontÃ©. (a utiliser dans une console <a href="https://docs.microsoft.com/fr-fr/cli/azure/install-azure-cli?view=azure-cli-latest">azure cli</a></p>
<pre><code class="language-ps1">az lab vm {{command}} --lab-name {{devtestlab}} --name {{vm-name}} --resource-group {{resource-group}}
</code></pre>
<p>command : start ou stop<br>
devtestlab : le nom de votre instance DevTest lab<br>
vm-name : le nom de votre vm<br>
resource-group : le nom du resource group ou est installÃ© la vm.</p>
</div>]]></content:encoded></item><item><title><![CDATA[OData & ngTable : un duo de choc]]></title><description><![CDATA[<div class="kg-card-markdown"><p>DerniÃ¨rement, jâ€™ai pas mal fait joujou avec <a href="http://www.odata.org/documentation/">OData</a>.<br>
Câ€™est quand mÃªme super plaisant de pouvoir requÃªter une source de donnÃ©es via une URL et avec une richesse proche de ce que lâ€™on connait avec du SQL.<br>
Une fois nâ€™est pas coutume je ne vais pas parler</p></div>]]></description><link>http://www.mymemoryleaks.fr/odata-ngtable-un-duo-de-choc/</link><guid isPermaLink="false">5a99b626f336bf15fc91af7f</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Mon, 12 Dec 2016 11:46:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>DerniÃ¨rement, jâ€™ai pas mal fait joujou avec <a href="http://www.odata.org/documentation/">OData</a>.<br>
Câ€™est quand mÃªme super plaisant de pouvoir requÃªter une source de donnÃ©es via une URL et avec une richesse proche de ce que lâ€™on connait avec du SQL.<br>
Une fois nâ€™est pas coutume je ne vais pas parler de .NET mais plutÃ´t partager avec vous un bout de javascript qui met en Ã©vidence la facilitÃ© avec laquelle vous pourrez brancher des tables <a href="http://ng-table.com/">ngtable</a> avec votre backend odata.</p>
<p>TrÃªve de bavardage, on passe au code :</p>
<iframe width="100%" height="1000" src="//jsfiddle.net/mymemoryleaks/r5hfj5b2/12/embedded/js,html,css,result/dark/" allowpaymentrequest="" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
<p>Pour cette illustration, j'ai utilisÃ© le web service <a href="http://services.odata.org/">services.odata.org</a> qui expose la base Northwind (sample Microsoft) que l'on a tous croisÃ©s un jour.</p>
<p>Juste un mot sur le code, Ã©videmment c'est le service odataTableService qui fait la glue entre OData et ngTable; c'est lui qui permet de rÃ©aliser les filtrages et les sorts. Une fois que ce service est disponible dans votre app, regardez avec quelle simplicitÃ©, votre controller peut crÃ©er une table :</p>
<pre><code class="language-js">$scope.tableParams = odataTableService.createTableParams({ endPoint: 'http://services.odata.org/V3/Northwind/Northwind.svc/Products' });
</code></pre>
<p>Je me demande vraiment pourquoi OData n'a pas plus que Ã§a le vent en poupe.</p>
</div>]]></content:encoded></item><item><title><![CDATA[Packager un projet SQL pour Octopus]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Que ce soit manuellement ou de maniÃ¨re automatique, lorsque l'on parle de dÃ©ploiement il va nous falloir dÃ©finir un package de dÃ©ploiement.</p>
<p>Dans l'univers Octopus, les packages de dÃ©ploiement sont des fichiers avec une extension .nupkg. Voyons comment en crÃ©er un pour un projet de Base de donnÃ©es.</p>
<h2 id="ajouterunedpendanceversoctopack">Ajouter une</h2></div>]]></description><link>http://www.mymemoryleaks.fr/packager-un-projet-sql-pour-octopus/</link><guid isPermaLink="false">5a99b626f336bf15fc91af7e</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Thu, 01 Sep 2016 20:07:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>Que ce soit manuellement ou de maniÃ¨re automatique, lorsque l'on parle de dÃ©ploiement il va nous falloir dÃ©finir un package de dÃ©ploiement.</p>
<p>Dans l'univers Octopus, les packages de dÃ©ploiement sont des fichiers avec une extension .nupkg. Voyons comment en crÃ©er un pour un projet de Base de donnÃ©es.</p>
<h2 id="ajouterunedpendanceversoctopack">Ajouter une dÃ©pendance vers Octopack</h2>
<p><a href="https://github.com/OctopusDeploy/OctoPack">Octopack</a> est lâ€™utilitaire que nous allons utiliser pour gÃ©nÃ©rer ce package de dÃ©ploiement. DÃ©mystifions le terme, octopack produit un fichier qui nâ€™est autre quâ€™un zip, contenant les fichiers Ã  dÃ©ployer ainsi quâ€™un ensemble de mÃ©tadonnÃ©es et potentiellement des scripts powershell.<br>
Bref, rien de bien extraordinaire.</p>
<p>Pour lâ€™installer dans notre projet de base de donnÃ©es, nous allons utiliser Nuget, qui est un gestionnaire de dÃ©pendances trÃ¨s performant et bien connu des dÃ©veloppeurs. Cependant il nâ€™est pas facilement accessible lorsquâ€™on travailler sur un projet SQL/SSIS/SSRS/SSAS.</p>
<p>Pour tromper Visual Studio nous allons commencer par ajouter un projet C# de type console pour faire simple</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhX2MtUFgtaWkzSnc" alt=""></p>
<p>Ajoutons sur ce projet C# une dÃ©pendance vers Octopack.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhWW5GRURBWXZOaGc" alt=""></p>
<p>Dans la nouvelle fenÃªtre on cherche le package Octopack, et on lâ€™installe.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhYTBIVkZQenpZWkU" alt=""></p>
<p>AprÃ¨s avoir acquittÃ© la fenÃªtre de preview dâ€™install, la fenÃªtre Â«OutputÂ» de visual Studio devrait vous confirmer que lâ€™installation sâ€™est bien passÃ©e.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhNVVFYnBwZEs1bmc" alt=""></p>
<p>Il aurait Ã©tÃ© formidable de pouvoir lâ€™installer directement dans notre projet de base, mais nous allons devoir transpirer un peu plus pour arriver Ã  nos fins.<br>
Ready ?? Ouvrons le fichier csproj de lâ€™application console et copions la portion de msbuild qui correspond Ã  Octopack</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhT0RybERZZi1hWnc" alt=""></p>
<p>Puis, copions la discrÃ¨tement dans notre fichier sqlproj, de la mÃªme maniÃ¨re Ã  la fin de celui-ci.<br>
Un petit rebuild pour vÃ©rifier que tout fonctionne toujours bienâ€¦ et TADAM yâ€™a toujours pas de package de dÃ©ploiement gÃ©nÃ©rÃ©.</p>
<h2 id="crerlepackage">CrÃ©er le package</h2>
<p>Bon si vous avez Ã©tÃ© un peu curieux, vous aurez remarquÃ© que la portion de msbuild que lâ€™on a copiÃ©e a pour but dâ€™importer un autre fichier msbuild (qui se trouve dans le rÃ©pertoire packagesOctoPack.3.4.1toolsOctoPack.targets)</p>
<p>En baragouinant un peu le msbuild, on comprend assez vite que la variable <code>RunOctoPack</code> est initialisÃ©e Ã  <code>false et câ€™est elle qui dÃ©clenche ou non la gÃ©nÃ©ration du package.</code></p>
<p>Alors Ã©videmment, une solution possible est de modifier cette variable Ã  true. NÃ©anmoins cela induit quâ€™un package de dÃ©ploiement sera crÃ©Ã© a chaque build du projet. Ce nâ€™est vraisemblablement pas ce que vous souhaitez.</p>
<p>Je vous propose plutÃ´t dâ€™ouvrir une console DOS et une fois dans le rÃ©pertoire du projet, tapez la commande suivante :</p>
<p>msbuild ContinuousBI.Sql.sqlproj /t:Build /p:RunOctoPack=true</p>
<p>Si tout sâ€™est bien passÃ© vous devriez avoir une sortie similaire a celle-ci :</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhVUh0aGctS2RJb0k" alt=""></p>
<p>Cette fois ci, si vous jetez un Å“il dans le sous-dossier obj/octopacked de votre projet vous y dÃ©couvrirez un fichier .nupkg qui est le package de dÃ©ploiement</p>
<h2 id="aquoiressemblemonpackage">A quoi ressemble mon package ?</h2>
<p>Pour aller un peu plus loin nous pouvons jeter un Å“il Ã  ce qui a Ã©tÃ© produit pour nous par Octopack.<br>
Je vous propose dâ€™utiliser <a href="https://npe.codeplex.com/downloads/get/clickOnce/NuGetPackageExplorer.application">nuget package explorer</a><br>
Ouvrez le et glissez dÃ©posez le fichier .nupkg, vous devriez obtenir un rÃ©sultat semblable Ã  celui-ci.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhTTFubGpDVU9wa3M" alt=""></p>
<p>Câ€™est confirmÃ©, le dacpac issu de la compilation Ã  bien Ã©tÃ© reconnu ; il est embarquÃ© dans package de dÃ©ploiement.</p>
<p>Nous verrons dans le prochain post comment le dÃ©ployer avec Octopus.</p>
</div>]]></content:encoded></item><item><title><![CDATA[Prolific usb to ttl et windows 10]]></title><description><![CDATA[<div class="kg-card-markdown"><p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhdWZ0NHAxcGRMalk" alt=""></p>
<p>DerniÃ¨rement j'ai ressorti ma <a href="https://beagleboard.org/black">BeableBone Black</a> histoire de faire une peu de veille techno. J'vous raconterai un de ces quatre en quoi monter une boite peut vite cramer tout votre temps libre, mais c'est pour la bonne cause.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhR3hTSnd4Z0FXNGM" alt=""></p>
<p>Bref pour en revenir Ã  la Beagle, je ressors mon cÃ¢ble sÃ©rie</p></div>]]></description><link>http://www.mymemoryleaks.fr/prolific-usb-to-ttl-et-windows-10/</link><guid isPermaLink="false">5a99b626f336bf15fc91af7d</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Wed, 11 May 2016 21:34:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhdWZ0NHAxcGRMalk" alt=""></p>
<p>DerniÃ¨rement j'ai ressorti ma <a href="https://beagleboard.org/black">BeableBone Black</a> histoire de faire une peu de veille techno. J'vous raconterai un de ces quatre en quoi monter une boite peut vite cramer tout votre temps libre, mais c'est pour la bonne cause.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhR3hTSnd4Z0FXNGM" alt=""></p>
<p>Bref pour en revenir Ã  la Beagle, je ressors mon cÃ¢ble sÃ©rie que j'utilise pour me connecter Ã  la console. Je fais les branchements et go sur le site de <a href="http://www.prolific.com.tw/US/ShowProduct.aspx?p_id=225&amp;pcid=41">Prolific</a> pour rÃ©cupÃ©rer le dernier driver pour Windows 10.</p>
<p>Tiens! bizarre, mÃªme aprÃ¨s un reboot je n'ai toujours rien qui s'affiche dans mon terminal.<br>
En creusant, je m'aperÃ§ois que le driver du cÃ¢ble n'est pas reconnu.</p>
<p><img src="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhWTJhdmlPLTE0Q0k" alt=""></p>
<p>S'en suit plusieurs tentatives de rÃ©installation et de reboot infructueuses.</p>
<p>Je cherche un peu sur Internet, pas mal de personnes ont des soucis avec des versions contrefaites achetÃ© sur des sites asiatiques. Le mien vient de chez <a href="https://www.adafruit.com/product/954">Adafruit</a>, et il fonctionnait parfaitement il y a quelques mois, sur Windows 8.</p>
<p>Ho... tiens rÃ©essayons sur cet ancien PC. Ca fonctionne parfaitement!<br>
Ã‰norme je rÃ©cupÃ¨re l'installer du driver qui se trouve sur ce dernier;<br>
Je repasse sur mon PC Ã©quipÃ© de Windows 10, dÃ©sinstalle le driver en place, reboot, installe l'ancien driver (fonctionnant sur Windows 8) et surprise, ca fonctionne.</p>
<p>Si Ã§a c'est pas de l'obsolescence programmÃ©e! Honteux!<br>
Rien que pour Ã§a, je vous recommande plutÃ´t d'investir dans un cÃ¢ble concurrent comme ce <a href="https://www.adafruit.com/products/70">FTDI</a>. J'en possÃ¨de un Ã©galement et fonctionne tout aussi bien.</p>
<p>Du coup, je vous dÃ©pose le driver fonctionnel, <a href="https://drive.google.com/uc?export=download&amp;id=0B3FYDprTEqfhanJlSTBZY3ZnZnc">ici</a>. J'espÃ¨res que cela pourra aider quelqu'un.</p>
<p>Tiens, en prime je poste ici le schÃ©ma de branchement du cÃ¢ble Prolific avec la beagle.</p>
<ul>
<li>Le fil noir va sur le pin 1 (GND)</li>
<li>le fil vert sur le pin 4 (RECEIVE)</li>
<li>le fil blanc sur le pin 5 (TRANSMIT)</li>
</ul>
<p>Ne branchez surtout pas le fil rouge, c'est du 5V, vous grilleriez la beagle!!</p>
</div>]]></content:encoded></item><item><title><![CDATA[Comment invoquer une mÃ©thode dont on connait le nom Ã  lâ€™exÃ©cution sur un dynamic?]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Comment invoquer une mÃ©thode dont on connait le nom Ã  l'exÃ©cution sur un dynamic?</p>
<p>Le mot clÃ© dynamic en C# n'est pas nouveau, il a vu le jour avec C# 4 et pourtant il nâ€™apparaÃ®t pas si souvent que Ã§a dans les bouts de code que je frÃ©quente.</p>
<p>DerniÃ¨rement</p></div>]]></description><link>http://www.mymemoryleaks.fr/comment-invoquer-une-methode-dont-on-connait-le-nom-a-lexecution-sur-un-dynamic/</link><guid isPermaLink="false">5a99b626f336bf15fc91af78</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Fri, 24 Jul 2015 12:51:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>Comment invoquer une mÃ©thode dont on connait le nom Ã  l'exÃ©cution sur un dynamic?</p>
<p>Le mot clÃ© dynamic en C# n'est pas nouveau, il a vu le jour avec C# 4 et pourtant il nâ€™apparaÃ®t pas si souvent que Ã§a dans les bouts de code que je frÃ©quente.</p>
<p>DerniÃ¨rement je l'ai recroisÃ© en utilisant <a href="http://signalr.net/">SignalR</a>; les hubs qui sont gÃ©nÃ©rÃ©s sont des objets dynamic.</p>
<p>Quoi qu'il en soit, derniÃ¨rement j'ai eu besoin d'invoquer une mÃ©thode dont le nom ne m'Ã©tait connu qu'Ã  l'exÃ©cution.<br>
Croyez-moi, j'y ai passÃ© un petit moment avant d'y arriver... Cela rÃ©vÃ¨le vraisemblablement ma grande ignorance ğŸ™‚</p>
<p>Ce blog post prendra donc la forme d'un post-it qui me fera gagner du temps la prochaine fois que je me frotterai a cette bÃªte-lÃ . Si pour vous les classes <a href="https://msdn.microsoft.com/fr-fr/library/microsoft.csharp.runtimebinder(v=vs.110).aspx">Binder</a> et <a href="https://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.callsite(v=vs.110).aspx">CallSite</a> n'ont plus de secret ce blog post vous semblera vraisemblablement bien terne.</p>
<p>Posons le problÃ¨me, on me donne un objet dynamic auquel une mÃ©thode est ajoutÃ©e Ã  l'exÃ©cution</p>
<p>private string sentence = &quot;Hello world&quot;; public dynamic BuildObj() { dynamic myDynObj = new ExpandoObject(); myDynObj.SayHello = new Func<string>(() =&gt; sentence); return myDynObj; }</string></p>
<p>Si j'avais connaissance de la mÃ©thode lors de la compilation je pourrais l'appeler ainsi :</p>
<p>[Test] public void CallDirectlyMethod() { dynamic myObj = BuildObj(); var ret = myObj.SayHello(); Assert.That(ret, Is.EqualTo(sentence)); }</p>
<p>Malheureusement la signature de la mÃ©thode ne m'est connue qu'Ã  l'exÃ©cution.<br>
Ok, premier rÃ©flexe je sors l'attirail de la reflection.... mais les rÃ©sultats restent catastrophiques :</p>
<p>[Test] public void CallMethodWithReflectionFails() { dynamic myObj = BuildObj(); Type t = myObj.GetType(); var method = t.GetMethod(&quot;SayHello&quot;, BindingFlags.Default | BindingFlags.Instance | BindingFlags.InvokeMethod | BindingFlags.NonPublic); Assert.That(method, Is.Null); }</p>
<p>Quels que soient les bindings flags, impossible de trouver la mÃ©thode... FAIL!!</p>
<p>Voici, donc la combinaison magique, un savant mÃ©lange de Runtime.Binder et CallSite...</p>
<p>[Test] public void CallMethodWithCallSite() { dynamic myObj = BuildObj(); var callSiteBinder = Binder.InvokeMember(CSharpBinderFlags.None, &quot;SayHello&quot;, Enumerable.Empty<type>(), myObj.GetType(), new [] { CSharpArgumentInfo.Create(CSharpArgumentInfoFlags.None, null) }); var callSite = CallSite&lt;Func&lt;CallSite, object, object&gt;&gt;.Create(callSiteBinder); string ret = callSite.Target(callSite, myObj); Assert.That(ret, Is.EqualTo(sentence)); }</type></p>
<p>Ok, essayons de dÃ©crypter un peu ce code qui semble un peu alambiquÃ©.<br>
Binder.InvokeMember va nous permettre Ã  l'exÃ©cution de pointer la bonne mÃ©thode un peu comme le ferait typeof(myObj).GetMethod()<br>
Le premier paramÃ¨tre permet de spÃ©cifier la maniÃ¨re dont est traitÃ© le type de retour. Dans le cas d'une Action nous aurions pu utiliser CSharpBinderFlags.ResultDiscarded. Dans notre cas, une Func, CSharpBinderFlags.None fonctionne bien.</p>
<p>puis viens en seconde position, Ã©videment le nom de la mÃ©thode a appelÃ©, passÃ©e sous forme de chaine.</p>
<p>En troisiÃ¨me position, il conviendra de fournir la liste des arguments de types Ã  nÃ©cessaire dans le cas d'une mÃ©thode gÃ©nÃ©rique.</p>
<p>Viens ensuite le type sur lequel effectuer l'invocation, ce qui permet de pointer une surcharge.</p>
<p>Et finalement les informations sur les paramÃ¨tres attendus et le type de retour (le premier Ã©lÃ©ment du tableau);</p>
<p>La crÃ©ation du CallSite&lt;Func&lt;CallSite, object, object&gt;&gt; permet d'arrÃªter la signature du delegate que l'on cherche Ã  appeler. Notez, que le dernier argument gÃ©nÃ©rique &quot;object&quot; devrait etre &quot;string&quot;, car il reprÃ©sente le type de retour de la func... mais pour une raison qui m'Ã©chappe l'utilisation de string comme type de retour entraÃ®ne une erreur au runtime, alors que le retour de la func est bien affectÃ© Ã  une variable string Ã  la ligne du dessous... il faut bien garder un peu de magie ğŸ™‚</p>
<p>Ok, Ã©videmment il ne nous reste plus qu'Ã  effectuer l'invocation, ce qui est rÃ©alisÃ© via le code callSite.Target(callSite, myObj);</p>
<p>J'espÃ¨re que ce post Ã©vitera quelques cheveux blancs a ceux qui se trouveront confrontÃ© au problÃ¨me.</p>
</div>]]></content:encoded></item><item><title><![CDATA[BeagleBone Black du carton Ã  Mono]]></title><description><![CDATA[<div class="kg-card-markdown"><p><a href="http://beagleboard.org/BLACK">Lâ€™IOT</a>, on en parle partout, de plus en plus ; Ã©videmment lâ€™univers Microsoft nâ€™est pas en retrait sur ce domaine avec la mise Ã  disposition de Windows 10 sur le <a href="https://msdn.microsoft.com/fr-fr/Library/Windows/Hardware/dn914597.aspx?f=255&amp;MSPPError=-2147217396#raspberry_pi_2">Raspberry</a> ou encore le <a href="https://msdn.microsoft.com/fr-fr/Library/Windows/Hardware/dn914597.aspx?f=255&amp;MSPPError=-2147217396#minnowboard_max">MinnowBoard MAX</a></p>
<p>Vous trouverez pas mal de blog post autour du raspberryâ€¦ je vais</p></div>]]></description><link>http://www.mymemoryleaks.fr/beaglebone-black-du-carton-a-mono/</link><guid isPermaLink="false">5a99b626f336bf15fc91af77</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Mon, 01 Jun 2015 10:31:00 GMT</pubDate><media:content url="http://mah1979.qsandbox.com/wp-content/uploads/2015/06/bbb_overview.png" medium="image"/><content:encoded><![CDATA[<div class="kg-card-markdown"><img src="http://mah1979.qsandbox.com/wp-content/uploads/2015/06/bbb_overview.png" alt="BeagleBone Black du carton Ã  Mono"><p><a href="http://beagleboard.org/BLACK">Lâ€™IOT</a>, on en parle partout, de plus en plus ; Ã©videmment lâ€™univers Microsoft nâ€™est pas en retrait sur ce domaine avec la mise Ã  disposition de Windows 10 sur le <a href="https://msdn.microsoft.com/fr-fr/Library/Windows/Hardware/dn914597.aspx?f=255&amp;MSPPError=-2147217396#raspberry_pi_2">Raspberry</a> ou encore le <a href="https://msdn.microsoft.com/fr-fr/Library/Windows/Hardware/dn914597.aspx?f=255&amp;MSPPError=-2147217396#minnowboard_max">MinnowBoard MAX</a></p>
<p>Vous trouverez pas mal de blog post autour du raspberryâ€¦ je vais donc plutÃ´t vous prÃ©senter comment vous lancer dans le dÃ©veloppement .NET embarqu&amp; sur cette magnifique plateforme quâ€™est le <a href="http://beagleboard.org/BLACK">BeagleBone Black (BBB)</a>. Au travers de cet article je vous propose dâ€™Ã©tudier les diffÃ©rentes Ã©tapes Ã  rÃ©aliser pour pouvoir lancer votre premier Â« Hello World Â» embarquÃ©.</p>
<p><a href="http://mah1979.qsandbox.com/wp-content/uploads/2015/06/bbb_overview.png"><img src="http://mah1979.qsandbox.com/wp-content/uploads/2015/06/bbb_overview-300x208.png" alt="BeagleBone Black du carton Ã  Mono"></a></p>
<p>Tout dâ€™abord il nâ€™y a pas de Windows 10 sur le BBB, en tout cas pour lâ€™instant, mais trÃ¨s honnÃªtement lâ€™installation dâ€™Ubuntu que je vous propose est Ã  la portÃ©e de tous.</p>
<h1 id="matrielncessaire">MatÃ©riel nÃ©cessaire</h1>
<p>Je commence par un petit coup de pub pour le site <a href="https://www.adafruit.com/"> AdaFruit</a> ou vous trouverez tout le matos que vous pouvez imaginer pour nos petits joujoux.</p>
<p>Aller Go ! Pour faciliter la visualisation de ce qui se passe sur votre BBB je vous conseille dâ€™investir dans un cÃ¢ble <a href="https://www.adafruit.com/products/70">Serial TTL-232 en usb</a>. Sans celui-ci vous devrez attendre que le BeagleBone ai rÃ©cupÃ©rÃ© une IP et vous y connecter (en ssh par exemple) et interagir avec.</p>
<p>Pour brancher le cÃ¢ble prenez comme repÃ¨re le fil noir qui doit venir se placer sur le pin J1 de votre BBB.</p>
<p>Installez les drivers FTDI pour prendre en compte lâ€™adaptateur usb. Ils se trouvent <a href="http://www.ftdichip.com/Drivers/VCP.htm">ici</a></p>
<p>Finalement en utilisant <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">Putty</a>, configurÃ© comme ci-dessous la console sâ€™affiche enfin sur votre pc.</p>
<p><a href="http://mah1979.qsandbox.com/wp-content/uploads/2015/06/putty.png"><img src="http://mah1979.qsandbox.com/wp-content/uploads/2015/06/putty-300x267.png" alt="BeagleBone Black du carton Ã  Mono"></a></p>
<p>Si lâ€™idÃ©e de brancher un cÃ¢ble Ethernet sur votre BeagleBone vous donne de lâ€™urticaire, je vous conseille ce <a href="https://www.adafruit.com/products/70">dongle usb</a>. Il est directement reconnu sous Ubuntu.</p>
<h1 id="installationdubuntu">Installation dâ€™Ubuntu</h1>
<p><a href="http://mah1979.qsandbox.com/wp-content/uploads/2015/06/ubuntu.png"><img src="http://mah1979.qsandbox.com/wp-content/uploads/2015/06/ubuntu-300x212.png" alt="BeagleBone Black du carton Ã  Mono"></a></p>
<p>Nous allons installer dans la mÃ©moire eMMC la version 14.04 dâ€™Ubuntu spÃ©cialement conÃ§ue pour la BBC. AprÃ¨s avoir <a href="https://rcn-ee.com/rootfs/2015-05-08/flasher/BBB-eMMC-flasher-ubuntu-14.04.2-console-armhf-2015-05-08-2gb.img.xz">tÃ©lÃ©chargÃ©</a> le fichier img.xz, il vous faudra le dÃ©compresser avec un outil comme <a href="http://www.7-zip.org/">7zip</a>.</p>
<p>Lâ€™image ainsi extraite pourra Ãªtre copiÃ©e sur une micro sd avec <a href="http://sourceforge.net/projects/win32diskimager/files/latest/download">Win 32 Disk Imager</a></p>
<p>Lorsque la copie se termine, insÃ©rer la micro sd dans le port prÃ©vu Ã  cet effet sur la BBB. Tout en appuyant avec votre index sur le bouton Â« boot Â» (le plus proche du port Ethernet), alimentez la BeagleBone. Laissez le doigt appuyÃ© jusquâ€™Ã  ce que les diodes clignotent.</p>
<p>Il faut 5 bonnes minutes pour que lâ€™installation se termine ; mais grÃ¢ce au cÃ¢ble TTL vous serez aux premiÃ¨res loges pour suivre lâ€™installation.</p>
<h1 id="misejourdusystmeetinstallationdemono">Mise Ã  jour du SystÃ¨me et installation de mono</h1>
<p>Ok, si vous en Ãªtes arrivÃ© lÃ , câ€™est du tout cuit.</p>
<p>Nous allons commencer par mettre Ã  jour le systÃ¨me grÃ¢ce package manager <a href="https://wiki.debian.org/Apt">APT</a>. A partir de la console tapez les commandes suivantes :</p>
<p>sudo apt-get update sudo apt-get upgrade</p>
<p>AprÃ¨s quelques minutes le systÃ¨me est prÃªt, on peut passer Ã  Mono. Le runtime devrait Ãªtre suffisant Ã©tant donnÃ© que lâ€™on va se contenter dâ€™exÃ©cuter des binaires crÃ©er sur votre machine de dev. Pour lâ€™installation on tape donc :</p>
<p>sudo apt-get install mono-runtime</p>
<h1 id="crationdelexcutableetdploiementsurlebbb">CrÃ©ation de lâ€™exÃ©cutable et dÃ©ploiement sur le BBB</h1>
<p>Je vous laisse Ã©crire votre premier Hello Beagle World dans Visual Studio ; en crÃ©ant un projet de type console et en targettant le Framework 4.5;</p>
<p>Une fois compilÃ©, jâ€™ai optÃ© pour un dÃ©ploiement type Â« bin-deploy Â» en utilisant un transfert via <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html">PSCP</a></p>
<p>Une fois PSCP copiÃ©, vous pourriez copier le fichier avec une ligne de commande comme celle-ci :</p>
<p>pscp.exe &quot;C: BBB HelloWorldbinDebugHelloWorld.exe&quot; <a href="mailto:ubuntu@192.168.10.2">ubuntu@192.168.10.2</a>:/home/ubuntu</p>
<p>Le premier paramÃ¨tre Ã©tant le ficher Ã  transmettre le second lâ€™url de destination au format :</p>
<p>user@hote:/chemin_de_destination</p>
<p>En dessert, aprÃ¨s tous ces efforts, nous pouvons enfin exÃ©cuter sur le Beagle notre Hello World en tapant :</p>
<p>Mono HelloWorld.exe</p>
</div>]]></content:encoded></item><item><title><![CDATA[Kibana : Explorez vos donnÃ©es.]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Cet article fait partie dâ€™une sÃ©riÃ© dÃ©diÃ©e Ã  <a href="http://www.elasticsearch.org/">Elasticsearch</a>, reportez vous Ã  <a href="http://mah1979.qsandbox.com/serie-elasticsearch/">lâ€™article sommaire</a> pour accÃ©der facilement aux autres posts.</p>
<p><a href="http://www.elasticsearch.org/overview/kibana/">Kibana</a> est la brique de visualisation qui gravite autour dâ€™Elasticsearch. Voici, quelques exemple de reprÃ©sentations faites avec Kibana :</p>
<p><a href="http://2.bp.blogspot.com/-4kq3k0UkJlg/VJL7YBWhIwI/AAAAAAAAJB0/9JVdU2Iiqs8/s1600/kibana1.png" title="1"><br>
<img src="http://2.bp.blogspot.com/-4kq3k0UkJlg/VJL7YBWhIwI/AAAAAAAAJB0/9JVdU2Iiqs8/s1600/kibana1.png" alt=""><br>
</a><br>
<a href="http://4.bp.blogspot.com/-bhF7rAOdIWk/VJL7YDyzhLI/AAAAAAAAJB4/rkHhggrLNrs/s1600/kibana2.png" title="2"><br>
<img src="http://4.bp.blogspot.com/-bhF7rAOdIWk/VJL7YDyzhLI/AAAAAAAAJB4/rkHhggrLNrs/s1600/kibana2.png" alt="Kibana 2"><br>
</a><br>
<a href="http://1.bp.blogspot.com/-n8gAeiLX1ys/VJL7YBl092I/AAAAAAAAJCA/SodVO4jCNeI/s1600/kibana3.png" title="3"><br>
<img src="http://1.bp.blogspot.com/-n8gAeiLX1ys/VJL7YBl092I/AAAAAAAAJCA/SodVO4jCNeI/s1600/kibana3.png" alt="Kibana 3"><br>
</a></p>
<p>Lâ€™exploration de donnÃ©es et la rÃ©alisation de dashboard</p></div>]]></description><link>http://www.mymemoryleaks.fr/kibana-explorez-vos-donnees/</link><guid isPermaLink="false">5a99b626f336bf15fc91af76</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Tue, 23 Dec 2014 09:39:00 GMT</pubDate><media:content url="http://mah1979.qsandbox.com/wp-content/uploads/2014/12/kibana1.png" medium="image"/><content:encoded><![CDATA[<div class="kg-card-markdown"><img src="http://mah1979.qsandbox.com/wp-content/uploads/2014/12/kibana1.png" alt="Kibana : Explorez vos donnÃ©es."><p>Cet article fait partie dâ€™une sÃ©riÃ© dÃ©diÃ©e Ã  <a href="http://www.elasticsearch.org/">Elasticsearch</a>, reportez vous Ã  <a href="http://mah1979.qsandbox.com/serie-elasticsearch/">lâ€™article sommaire</a> pour accÃ©der facilement aux autres posts.</p>
<p><a href="http://www.elasticsearch.org/overview/kibana/">Kibana</a> est la brique de visualisation qui gravite autour dâ€™Elasticsearch. Voici, quelques exemple de reprÃ©sentations faites avec Kibana :</p>
<p><a href="http://2.bp.blogspot.com/-4kq3k0UkJlg/VJL7YBWhIwI/AAAAAAAAJB0/9JVdU2Iiqs8/s1600/kibana1.png" title="1"><br>
<img src="http://2.bp.blogspot.com/-4kq3k0UkJlg/VJL7YBWhIwI/AAAAAAAAJB0/9JVdU2Iiqs8/s1600/kibana1.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a><br>
<a href="http://4.bp.blogspot.com/-bhF7rAOdIWk/VJL7YDyzhLI/AAAAAAAAJB4/rkHhggrLNrs/s1600/kibana2.png" title="2"><br>
<img src="http://4.bp.blogspot.com/-bhF7rAOdIWk/VJL7YDyzhLI/AAAAAAAAJB4/rkHhggrLNrs/s1600/kibana2.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a><br>
<a href="http://1.bp.blogspot.com/-n8gAeiLX1ys/VJL7YBl092I/AAAAAAAAJCA/SodVO4jCNeI/s1600/kibana3.png" title="3"><br>
<img src="http://1.bp.blogspot.com/-n8gAeiLX1ys/VJL7YBl092I/AAAAAAAAJCA/SodVO4jCNeI/s1600/kibana3.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a></p>
<p>Lâ€™exploration de donnÃ©es et la rÃ©alisation de dashboard ne nÃ©cessitent aucun code, ce qui permet de donner la main aux fonctionnels ; De plus Kibana et Elastocsearch permettent dâ€™avoir des rapports real time, se mettant Ã  jour Ã  mesure que les donnÃ©es sont stockÃ©es.</p>
<p>Pour les lecteurs qui connaissent bien la stack SQL Serveur, on pourrait le comparer Ã  un Report Builder sous stÃ©roÃ¯des et surtout qui tiendrait (mieux) ses promesses de simplicitÃ©s et dâ€™accessibilitÃ© pour les non-techniciens</p>
<p>Je me propose dans ce billet de dÃ©couvrir ensemble les fonctionnalitÃ©s de Â« data discovering Â» sur un <a href="https://www.data.gouv.fr/fr/datasets/base-de-donnees-des-accidents-corporels-de-la-circulation/">dataset public</a> recensant les accidents corporels de la circulation</p>
<p>Si ces donnÃ©es vous intÃ©ressent, je vous invite dâ€™ailleurs Ã  jeter un Å“il Ã  la trÃ¨s bonne session (<a href="https://www.youtube.com/watch?v=2rB7CbCVb1U">video</a>, <a href="https://onedrive.live.com/?cid=11D07374EB30D233&amp;id=11D07374EB30D233%21915">slides</a>) de <a href="http://patriceharel.blogspot.com/">Patrice Harel</a> sur le mining avec SSAS et qui sâ€™appui sur le mÃªme jeu de donnÃ©es.</p>
<h1 id="installation">Installation</h1>
<p>CommenÃ§ons par lâ€™installation qui comme pour les autres composants de la stack est triviale :<br>
Tout commence Ã©videment par le tÃ©lÃ©chargement du binaire <a href="http://www.elasticsearch.org/overview/kibana/installation/">ici</a>, suivi de la dÃ©compression de lâ€™archive.<br>
Si votre instance elasticsearh ne tourne pas sur le mÃªme serveur qui hÃ©bergera Kibana ou si elle Ã©coute sur un port non standard, il vous faudra modifier le fichier de configuration config/kibana.yml.<br>
Dans mon cas, je ne touche Ã  rien!<br>
Puis Ã  lâ€™aide dâ€™une fenÃªtre commande, il nous faudra exÃ©cuter /bin/kibana aprÃ¨s sâ€™Ãªtre placÃ© dans le rÃ©pertoire ou a Ã©tÃ© dÃ©compressÃ© lâ€™archive.<br>
Finalement pointons notre navigateur sur lâ€™url <a href="http://mah1979.qsandbox.com/#">http://localhost:5601</a></p>
<h1 id="exploration">Exploration</h1>
<p>Sâ€™il sâ€™agit de la premiÃ¨re fois que vous lancez Kibana, cet Ã©cran vous sera prÃ©sentÃ©, dans lequel il vous faudra choisir un index (Ã©quivalent de base de donnÃ©es) ainsi quâ€™une colonne typÃ©e date.<br>
Ce dernier point est extrÃªmement important, car Kibana part du principe quâ€™il est naturel pour lâ€™esprit humain et plus facile de dÃ©couvrir des donnÃ©es lorsquâ€™elles sont reprÃ©sentÃ©es sur une frise.<br>
<a href="http://1.bp.blogspot.com/-Z810eCg254A/VJL94zZOHZI/AAAAAAAAJCQ/8Z7RV0Y646s/s1600/kibana_configIndex.png" title="configure"><br>
<img src="http://1.bp.blogspot.com/-Z810eCg254A/VJL94zZOHZI/AAAAAAAAJCQ/8Z7RV0Y646s/s1600/kibana_configIndex.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a><br>
Dans notre dataset, nous ne disposons malheureusement pas de la date de lâ€™accident, qui aurait Ã©tÃ© le candidat idÃ©al en tant que Â« time field Â».<br>
Pour lâ€™exemple, nous nous rabattrons sur le champ @timestamp reprÃ©sentant lâ€™instant ou a Ã©tÃ© insÃ©rÃ© lâ€™Ã©vÃ©nement dans notre index.</p>
<p>On se retrouve propulsÃ© dans nos donnÃ©es via lâ€™Ã©cran suivant :<br>
<a href="http://2.bp.blogspot.com/-kmVU6veyAE0/VJL-Sxl_dwI/AAAAAAAAJCY/V6IOfdp5XuE/s1600/kibana_zones.png" title="explore"><br>
<img src="http://2.bp.blogspot.com/-kmVU6veyAE0/VJL-Sxl_dwI/AAAAAAAAJCY/V6IOfdp5XuE/s1600/kibana_zones.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a><br>
On reconnait trÃ¨s vite plusieurs sections dans cette interface :</p>
<ul>
<li>La colonne de gauche qui contient les champs Ã  disposition (1).</li>
<li>Tout en haut (2), une zone de filtre ; nâ€™oublions pas quâ€™elasticsearch est un moteur de rechercheâ€¦</li>
<li>Lâ€™indicateur du nombre dâ€™enregistrements aprÃ¨s filtrage (3).</li>
<li>La frise temporelle sur laquelle on regarde les Ã©vÃ©nements (4).</li>
<li>Finalement la vue tableau de donnÃ©es au centre. Notons que pour lâ€™instant elle nous reprÃ©sente la version brute des donnÃ©es, car nous nâ€™avons pas encore choisit de colonnes Ã  afficher.</li>
</ul>
<p>CommenÃ§ons par cliquer sur les barres du graph afin dâ€™effectuer un drilldown au niveau temps.<br>
<a href="http://4.bp.blogspot.com/-IiU8s0EQj9k/VJL_V6DIH1I/AAAAAAAAJCk/rbUVL-Eq8Tw/s1600/kibana_timeseries.png" title="times series"><br>
<img src="http://4.bp.blogspot.com/-IiU8s0EQj9k/VJL_V6DIH1I/AAAAAAAAJCk/rbUVL-Eq8Tw/s1600/kibana_timeseries.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a><br>
InstantanÃ©ment cela nous permet de dÃ©couvrir la rÃ©partition des data dans le temps. Notez, que les clics que nous avons fait sur le graph sont interprÃ©tÃ©s comme une clause de filtrage, diminuant les Ã©vÃ©nements auxquels on sâ€™intÃ©resse.</p>
<p>Pour avoir un aperÃ§u du contenu des champs, je vous conseille de cliquer sur le nom d'un champ dans la colonne de gauche ; comme ceci :</p>
<p><img src="http://1.bp.blogspot.com/-F0lPUUYf2Ug/VJL_0oFOkmI/AAAAAAAAJCs/mELz1DPeLXs/s1600/kibana_FieldCount.png" alt="Kibana : Explorez vos donnÃ©es."></p>
<p>Les informations et actions prÃ©sentÃ©es ici sont une vraie mine dâ€™or.<br>
En plus d'un premier comptage des donnÃ©es sous-jacentes, on peut par exemple se concentrer sur les Ã©vÃ©nements qui ont eu lieu sur lâ€™A31 en cliquant sur l'icone loupe+. Evidemment, la frise temporelle et les donnÃ©es sont mis Ã  jour.<br>
<a href="http://1.bp.blogspot.com/-pe2N46v18dE/VJMBPbsDBdI/AAAAAAAAJC4/GBDGOuzcuAo/s1600/kibana_filteredtimeseries.png" title="time series"><br>
<img src="http://1.bp.blogspot.com/-pe2N46v18dE/VJMBPbsDBdI/AAAAAAAAJC4/GBDGOuzcuAo/s1600/kibana_filteredtimeseries.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a></p>
<p>Maintenant, intÃ©ressons nous au champ tbl qui reprÃ©sente le nombre de blessÃ©s lÃ©gers dans un accident.</p>
<p><img src="http://2.bp.blogspot.com/-J8qQtRTTLmk/VJMCR51JDmI/AAAAAAAAJDE/Nax3m2JrEuY/s1600/kibana_tbl.png" alt="Kibana : Explorez vos donnÃ©es."></p>
<p>En cliquant sur Â« Visualize Â», on obtient la rÃ©partition top 20, sous forme dâ€™histogramme, du nombre de blessÃ©s lÃ©gers sur lâ€™ensemble des Ã©vÃ©nements de la base.<br>
<a href="http://1.bp.blogspot.com/-42EKGG1e31g/VJMCs3vORDI/AAAAAAAAJDM/XfSnLY2gK0M/s1600/kibana_visualize.png" title="Visualize"><br>
<img src="http://1.bp.blogspot.com/-42EKGG1e31g/VJMCs3vORDI/AAAAAAAAJDM/XfSnLY2gK0M/s1600/kibana_visualize.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a><br>
Ici aussi cette visualisation, nous permet dâ€™apprÃ©hender rapidement la teneur de nos donnÃ©es.</p>
<p>Finalement jetons un Å“il, au filtre qui se trouve tout en haut de lâ€™interface de Kibana. Par dÃ©faut, vous y trouverez une *. Attention, il nâ€™y a pas ici dâ€™analogie avec SQL, ici lâ€™Ã©toile signifie sans filtre.<br>
Nous pourrions par exemple nous intÃ©resser Ã  une commune en particulier, celle de Cergy par exemple (95002). Il nous suffira pour ce faire de saisir le filtre suivant :</p>
<p>codeinsee:=95002</p>
<p><a href="http://4.bp.blogspot.com/-MH9KuJdcVgE/VJMJZbCPthI/AAAAAAAAJDk/47EQjYENWWI/s1600/kibana_QueryEqual.png" title="Equals filter"><br>
<img src="http://4.bp.blogspot.com/-MH9KuJdcVgE/VJMJZbCPthI/AAAAAAAAJDk/47EQjYENWWI/s1600/kibana_QueryEqual.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a><br>
Ou bien les accidents impliquant plus de 2 morts</p>
<p>ttuÃ©:&gt;2</p>
<p><a href="http://2.bp.blogspot.com/-Mdsx4ZiSjXw/VJMKCSepodI/AAAAAAAAJDs/leAErdXX-YE/s1600/kibana_QueryGreater.png" title="Greater filter"><br>
<img src="http://2.bp.blogspot.com/-Mdsx4ZiSjXw/VJMKCSepodI/AAAAAAAAJDs/leAErdXX-YE/s1600/kibana_QueryGreater.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a><br>
Ou encore les accidents impliquant plus de 2 morts dans lâ€™Oise :</p>
<p>ttuÃ©:&gt;2 AND codeinsee [60000 TO 69999]</p>
<p><a href="http://3.bp.blogspot.com/-H-sa9wi4IHc/VJMIlgo0inI/AAAAAAAAJDc/QS_ApVYRcyI/s1600/kibana_QueryRange.png" title="Range filter"><br>
<img src="http://3.bp.blogspot.com/-H-sa9wi4IHc/VJMIlgo0inI/AAAAAAAAJDc/QS_ApVYRcyI/s1600/kibana_QueryRange.png" alt="Kibana : Explorez vos donnÃ©es."><br>
</a></p>
<p>Voila qui clos ce premier article sur Kibana, en espÃ©rant vous avoir donnÃ© envie dâ€™essayer ce superbe outil.</p>
</div>]]></content:encoded></item><item><title><![CDATA[SÃ©rie Elasticsearch]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Ce post fait office de sommaire Ã  toute une sÃ©rie dâ€™articles que jâ€™ai bon espoir dâ€™Ã©crire sur cette toute fin dâ€™annÃ©e 2014 et le dÃ©but 2015.</p>
<p>Mais pourquoi parler dâ€™Elasticsearch, moi qui ne traite que de technos Microsoft sur ce blog?</p>
<p>Cela part du constat</p></div>]]></description><link>http://www.mymemoryleaks.fr/serie-elasticsearch/</link><guid isPermaLink="false">5a99b626f336bf15fc91af75</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Tue, 23 Dec 2014 09:37:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>Ce post fait office de sommaire Ã  toute une sÃ©rie dâ€™articles que jâ€™ai bon espoir dâ€™Ã©crire sur cette toute fin dâ€™annÃ©e 2014 et le dÃ©but 2015.</p>
<p>Mais pourquoi parler dâ€™Elasticsearch, moi qui ne traite que de technos Microsoft sur ce blog?</p>
<p>Cela part du constat quâ€™a mon humble avis, la stack BI Microsoft pÃ¨che sur deux points :</p>
<ul>
<li>PremiÃ¨rement, il nâ€™existe pas dâ€™outils permettant une exploration dÃ©cente des donnÃ©es non encore nettoyÃ©es, rangÃ©es, retraitÃ©es etc.â€¦ dâ€™ailleurs, plus la volumÃ©trie est importante et plus ce point est difficilement adressable.<br>
(i.e : sur de petites volumÃ©tries, jâ€™en entends dÃ©jÃ  me dire quâ€™Excel peut avoir ce rÃ´le, avec un enchevÃªtrement de tableaux croisÃ©s dynamiques etcâ€¦ )</li>
<li>Lâ€™outillage de reporting est assez pauvre et nâ€™est vraiment pas penser pour Ãªtre Ã  destination des fonctionnels.<br>
Je mâ€™explique Reporting Services fait le job lorsquâ€™il sâ€™agit de rÃ©aliser un document pro format, mais nÃ©cessite des compÃ©tences techniques que nos fonctionnels ne disposent pas ; et câ€™est bien normal.<br>
Vous aurez probablement Ã©galement entendu parler de la version Â« User Friendly Â» de Â« Reporting Services Â», jâ€™ai nommÃ© Report Builder. La tentative est louable, mais le rÃ©sultat nâ€™est pas la Ã  hauteur.<br>
Encore une fois dans les faits, bien peut de fonctionnels ont les connaissances, lâ€™envie et le temps de lâ€™utiliser.</li>
</ul>
<p>Câ€™est avec ces regrets dans lâ€™Ã¢me, que je me retrouve lors de la confÃ©rence <a href="http://ncraft.io/">ncraft 2014</a> Ã  assister Ã  une superbe session dâ€™<a href="http://code972.com/blog">Itamar Syn-Hershko</a> consacrÃ©e au couple Elasticsearch et Kibana.</p>
<p>Je vous passe les dÃ©tails de <a href="https://www.youtube.com/watch?v=s_1IiYQyB20">cette prÃ©sentation</a>, mais effet whaou garanti vers la fin de la session lorsque Kibana rentre en scÃ¨ne.</p>
<p>Certain doivent se dire quâ€™il mâ€™a fallu presque 1 an pour commencer Ã  sortir un article, quelle productivitÃ© !</p>
<p>Pour Ãªtre tout Ã  fait franc, il y a 1 an il manquait encore quelques features indispensable a mon sens pour que Kibana puisse jouer un rÃ´le aussi important que ce pour quoi il Ã  Ã©tÃ© conÃ§u. Lâ€™exemple le plus probant Ã©tait lâ€™impossibilitÃ© de rÃ©aliser un Â« distinc count Â» ; un Â« show stopper Â» pour qui compte faire un peu de BI sÃ©rieusement.</p>
<p>Voila pour le petit historique et mes Ã©tats dâ€™Ã¢mes ; Kibana est arrivÃ© Ã  maturitÃ© selon moi dans ses cas dâ€™utilisation standard et cela mÃ©ritÃ© bien quâ€™on sâ€™y intÃ©resse ainsi quâ€™a lâ€™Ã©cosystÃ¨me qui gravite autour.</p>
<p>Voici enfin lâ€™heure du menu :</p>
<ul>
<li><a href="http://mah1979.qsandbox.com/kibana-explorez-vos-donnees/">1ere Partie : Explorez vos donnÃ©es avec Kibana</a></li>
<li>2eme Partie : Chargez vos donnÃ©es, les yeux fermÃ©s avec Logstash</li>
<li>3eme Partie : Introduction Ã  Elasticsearch</li>
<li>4eme Partie : Changement de mapping et Reindexation</li>
<li>5eme Partie : Reporting avancÃ© &amp; Dashbording (Kibana)</li>
<li>6eme Partie : Transformation de donnÃ©es (Logstash)</li>
</ul>
<p>Il yâ€™a de forte chance que ce sommaire soit agrÃ©mentÃ© dâ€™autres articles dans le futur ; le domaine Ã©tant extrÃªmement large.</p>
<p>Dernier point, lâ€™ordre des premiers articles peut vous paraÃ®tre Ã©trange ; jâ€™ai voulu partir de ce qui apportera le plus de valeur ajoutÃ© aux fonctionnels pour finir par ce qui requiers le plus de compÃ©tences techniques.</p>
<p>Il ne me reste qu'a vous souhaiter une bonne lecture, et n'hÃ©sitez pas a me laisser vos commentaires.</p>
</div>]]></content:encoded></item><item><title><![CDATA[Utiliser Couchbase comme serveur de cache]]></title><description><![CDATA[<div class="kg-card-markdown"><p>DerniÃ¨rement, je vous prÃ©sentais une faÃ§on simple d'utiliser le <a href="http://mah1979.qsandbox.com/poor-mans-cache/">cache dans vos applications .NET</a><br>
Cependant cette solution possÃ¨de plusieurs inconvÃ©nients. En voici quelque uns :</p>
<ul>
<li>Le cache est liÃ© au processus systÃ¨me de votre application (executable / IIS etc...). Si votre programme plante ou est fermÃ©, vous perdez votre cache</li>
<li>Si vos</li></ul></div>]]></description><link>http://www.mymemoryleaks.fr/utiliser-couchbase-comme-serveur-de-cache/</link><guid isPermaLink="false">5a99b626f336bf15fc91af74</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Fri, 11 Apr 2014 13:13:00 GMT</pubDate><media:content url="http://mah1979.qsandbox.com/wp-content/uploads/2014/04/config_couchbase.png" medium="image"/><content:encoded><![CDATA[<div class="kg-card-markdown"><img src="http://mah1979.qsandbox.com/wp-content/uploads/2014/04/config_couchbase.png" alt="Utiliser Couchbase comme serveur de cache"><p>DerniÃ¨rement, je vous prÃ©sentais une faÃ§on simple d'utiliser le <a href="http://mah1979.qsandbox.com/poor-mans-cache/">cache dans vos applications .NET</a><br>
Cependant cette solution possÃ¨de plusieurs inconvÃ©nients. En voici quelque uns :</p>
<ul>
<li>Le cache est liÃ© au processus systÃ¨me de votre application (executable / IIS etc...). Si votre programme plante ou est fermÃ©, vous perdez votre cache</li>
<li>Si vos besoins en mÃ©moire augmentent, cette solution n'est pas scalable</li>
<li>Rien n'est mis a disposition pour monitorer votre cache</li>
<li>Vous n'avez pas d'interface de gestion du cache (augmentation de la mÃ©moire allouÃ©e etc...)</li>
<li>Vous ne pouvez pas invalider le cache sans arrÃªter l'application.</li>
<li>etc...</li>
</ul>
<p>Bref, vous avez compris, c'est une solution pour dÃ©marrer petit.</p>
<p>Aujourd'hui, je voudrais partager avec vous une solution qui rÃ©pond Ã  tous les manques Ã©voquÃ©s plus haut et plus encore.<br>
Couchbase est une base NoSQL Key/Value; la value ayant comme particularitÃ© d'Ãªtre un document json.<br>
Couchbase est issu du mariage heureux de Membase (cache mÃ©moire avec rÃ©plication des caches, persistance et interface dâ€™admin Web sexy) et<br>
CouchDB (NoSQL orientÃ© document). Ce qui nous intÃ©resse plus particuliÃ¨rement aujourd'hui sont les fonctionnalitÃ©s qui en font un bon serveur de cache.</p>
<h3 id="installation">Installation</h3>
<p>Pour l'installer, tout commence par <a href="http://www.couchbase.com/couchbase-server/overview">tÃ©lÃ©charger le setup ici</a></p>
<p>Je vous passe le scÃ©nario d'installation qui a le bon gout de se faire en &quot;Next&quot; &gt; &quot;Next&quot; &gt; &quot;Next&quot;</p>
<p>Passons Ã  la configuration :</p>
<p>Dans la premiÃ¨re Ã©tape, il vous faudra spÃ©cifier l'emplacement des fichiers (base et index) ainsi que la mÃ©moire dÃ©volue Ã  Couchbase.</p>
<p><a href="http://3.bp.blogspot.com/-a9Gm-TdZhEk/U0fm0nM3eeI/AAAAAAAAGL8/5k4Wmmk2nNo/s1600/config_couchbase.png"><img src="http://3.bp.blogspot.com/-a9Gm-TdZhEk/U0fm0nM3eeI/AAAAAAAAGL8/5k4Wmmk2nNo/s1600/config_couchbase.png" alt="Utiliser Couchbase comme serveur de cache"></a></p>
<p>Un peu plus loin nous allons crÃ©er le l'espace qui accueillera les objets que l'on va mettre en cache (bucket).</p>
<p><a href="http://3.bp.blogspot.com/-wftJQDUu1Lw/U0fnPKiT2tI/AAAAAAAAGME/1Mk3vI8CflE/s1600/bucket.png"><img src="http://3.bp.blogspot.com/-wftJQDUu1Lw/U0fnPKiT2tI/AAAAAAAAGME/1Mk3vI8CflE/s1600/bucket.png" alt="Utiliser Couchbase comme serveur de cache"></a></p>
<p>Quelques instant plus tard vous voila avec un Couchbase flambant neuf sur votre machine.</p>
<p><a href="http://3.bp.blogspot.com/-MsQaiQROQuI/U0fniAPHxJI/AAAAAAAAGMM/QUZOAShtgKw/s1600/complete.png"><img src="http://3.bp.blogspot.com/-MsQaiQROQuI/U0fniAPHxJI/AAAAAAAAGMM/QUZOAShtgKw/s1600/complete.png" alt="Utiliser Couchbase comme serveur de cache"></a></p>
<p>Note : si la page ne s'ouvre pas automatiquement dans votre browser, la console d'admin de couchbase se trouve a l'adresse suivante : <a href="http://localhost:8091/">http://localhost:8091/</a></p>
<h3 id="implementation">Implementation</h3>
<p>Couchbase dispose d'un trÃ¨s bel Ã©cosystÃ¨me qui gravite autour, et la plateforme .NET ne fait pas exception.<br>
Je me propose d'adapter le cache manager vu dans le <a href="http://mah1979.qsandbox.com/poor-mans-cache/">prÃ©cÃ©dent article.</a><br>
Pour rappel nous avions l'interface suivante :</p>
<p>public interface ICacheManager { T GetOrInsert<t>(string key, Func<t> callback) where T : class; }</t></t></p>
<p>Passons Ã  l'implÃ©mentation. Il va nous falloir un driver, que l'on peut aisÃ©ment installer via <a href="http://www.nuget.org/">nuget</a> :</p>
<p><a href="http://1.bp.blogspot.com/--7tTMlX55hE/U0foFlp4VXI/AAAAAAAAGMU/SyojzYwUV5U/s1600/nuget_couchbase.png"><img src="http://1.bp.blogspot.com/--7tTMlX55hE/U0foFlp4VXI/AAAAAAAAGMU/SyojzYwUV5U/s1600/nuget_couchbase.png" alt="Utiliser Couchbase comme serveur de cache"></a></p>
<p>son utilisation est des plus simple, avec des mÃ©thodes explicites comme Get() et Store().<br>
Voici une implÃ©mentation de cache respectant notre interface basÃ©e sur Couchbase.</p>
<p>public class CouchbaseCacheManager : ICacheManager { private readonly CouchbaseClient _client; public CouchebaseCacheManager() { _client = new CouchbaseClient(); } public T GetOrInsert<t>(string key, Func<t> callback) where T : class { T elmnt; try { if (_client.KeyExists(key)) return _client.Get<t>(key); elmnt = callback(); _client.Store(StoreMode.Add, key, elmnt); } catch (Exception) { elmnt = callback(); } return elmnt; } }</t></t></t></p>
<p>Et vous, quel type de cache utilisez vous dans vos projets?</p>
</div>]]></content:encoded></item><item><title><![CDATA[Poor man's cache]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Depuis la version 4 du framework .NET, la gestion d'un cache est profondement encrÃ©e dans l'adn de notre framework.<br>
Il devient alors extrÃªmement facile de stocker en mÃ©moire Ã  peu prÃ¨s n'importe quoi.<br>
Je vous livre dans ce court billet, une implÃ©mentation extrÃªmement simple que j'utilise souvent dans mes projets.</p></div>]]></description><link>http://www.mymemoryleaks.fr/poor-mans-cache/</link><guid isPermaLink="false">5a99b626f336bf15fc91af73</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Fri, 04 Apr 2014 15:10:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>Depuis la version 4 du framework .NET, la gestion d'un cache est profondement encrÃ©e dans l'adn de notre framework.<br>
Il devient alors extrÃªmement facile de stocker en mÃ©moire Ã  peu prÃ¨s n'importe quoi.<br>
Je vous livre dans ce court billet, une implÃ©mentation extrÃªmement simple que j'utilise souvent dans mes projets.<br>
CommenÃ§ons par dÃ©finir une interface, qui nous permettra <a href="http://blog.ploeh.dk/tags.html#Dependency%20Injection-ref">d'injecter</a> notre cache manager un peu partout :</p>
<p>public interface ICacheManager { T GetOrInsert<t>(string key, Func<t> callback) where T : class; }</t></t></p>
<p>et finalement voici une implÃ©mentation extra simple de notre cache manager</p>
<p>public class CacheManager : ICacheManager { public T GetOrInsert<t>(string key, Func<t> callback) where T : class { ObjectCache cache = MemoryCache.Default; if (cache.Contains(key)) return cache[key] as T; T elmnt = callback(); cache.Add(new CacheItem(key, elmnt), new CacheItemPolicy()); return elmnt; } }</t></t></p>
<p>Voici un exemple d'utilisation.</p>
<p>IEnumerable<product> products = _cache.GetOrInsert(&quot;Ma_Clef_Unique_Cache&quot;, () =&gt; { return _productService.GetFrenchProducts(); } );</product></p>
<p>Simple non?</p>
</div>]]></content:encoded></item><item><title><![CDATA[IISExpress : Servir des pages vers lâ€™extÃ©rieur.]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Nul doute, IISExpress nous a simplifiÃ© la vie au quotidien de par sa facilitÃ© d'utilisation et son intÃ©gration Ã  Visual Studio.<br>
Aujourd'hui, je devais travailler Ã  rendre un site compatible avec l'ipad. Ni une ni deux, je lance safari et pointe vers l'ip de ma machine de dev.<br>
Et boom</p></div>]]></description><link>http://www.mymemoryleaks.fr/iisexpress-servir-des-pages-vers-lexterieur/</link><guid isPermaLink="false">5a99b626f336bf15fc91af72</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Fri, 28 Mar 2014 22:23:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>Nul doute, IISExpress nous a simplifiÃ© la vie au quotidien de par sa facilitÃ© d'utilisation et son intÃ©gration Ã  Visual Studio.<br>
Aujourd'hui, je devais travailler Ã  rendre un site compatible avec l'ipad. Ni une ni deux, je lance safari et pointe vers l'ip de ma machine de dev.<br>
Et boom une belle erreur, me prÃ©vient que IISExpress ne servira de pages qu'en local.</p>
<p>Voici comment je l'ai configurÃ© afin de pouvoir tester sur mon Ipad.</p>
<h3 id="1configuronsnotresitewebafinquilsoitbindsurtouteslesipdenotremachinededev">1 - Configurons notre site web afin qu'il soit bindÃ© sur toutes les IP de notre machine de dev.</h3>
<p>Pour ce faire ouvrons le fichier de config de IISExpress qui se trouve sur : %userprofile%My DocumentsIISExpressconfigapplicationhost.config<br>
Recherchons la config de notre site</p>
<p><site name="MonSite" id="10"> <application path="/" applicationpool="Clr4IntegratedAppPool"> <virtualdirectory path="/" physicalpath="C:!ProjectMonSite"> </virtualdirectory></application> <bindings> <binding protocol="https" bindinginformation="*:44300:localhost"> </binding></bindings> </site></p>
<p>remplaÃ§ons le binding afin que le site soit servi quelque soit l'ip sur laquelle arrive la requete</p>
<p><site name="MonSite" id="10"> <application path="/" applicationpool="Clr4IntegratedAppPool"> <virtualdirectory path="/" physicalpath="C:!ProjectMonSite"> </virtualdirectory></application> <bindings> <binding protocol="https" bindinginformation="*:44300:*"> </binding></bindings> </site></p>
<h3 id="2rservonslurlauniveaudukernelhttpsys">2 - RÃ©servons l'url au niveau du kernel (HTTP.sys)</h3>
<p>Cela se fait via la ligne de commande suivante, a executÃ©e dans une console en mode admin.</p>
<blockquote>
<p>netsh http add urlacl url=https://*:44300/ user=everyone</p>
</blockquote>
<p>Note : pour ceux qui travaillent sur un windows en franÃ§ais il faudra alors taper</p>
<blockquote>
<p>netsh http add urlacl url=https://*:44300/ user=&quot;tout le monde&quot;</p>
</blockquote>
<h3 id="3autoriserletraficautraversdufirewall">3 - Autoriser le trafic au travers du firewall</h3>
<p>De nouveau une commande Ã  exÃ©cuter via une console en mode admin :</p>
<blockquote>
<p>netsh firewall add portopening TCP 44300 IISExpressWeb enable ALL</p>
</blockquote>
<p>Voila, j'espÃ¨re que cette astuce pourra vous Ã©viter de rester coincÃ© si vous devez exposer un site hebergÃ© sur votre machine de dev</p>
</div>]]></content:encoded></item><item><title><![CDATA[EntityFramework.Patterns 0.8 est compatible EF 6]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Ã‡a faisait longtemps que je n'avais pas remis les mains dans ce projet, plus d'un an pour Ãªtre exact. Le passage Ã  Entity Framework 5 n'avait pas posÃ© de soucis car aucun breaking changes dans l'API n'avait bloquÃ© l'utilisation de la librairie. C'est surement ce qui explique le nombre &quot;</p></div>]]></description><link>http://www.mymemoryleaks.fr/entityframework-patterns-0-8-est-compatible-ef-6/</link><guid isPermaLink="false">5a99b626f336bf15fc91af71</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Sun, 17 Nov 2013 21:01:00 GMT</pubDate><content:encoded><![CDATA[<div class="kg-card-markdown"><p>Ã‡a faisait longtemps que je n'avais pas remis les mains dans ce projet, plus d'un an pour Ãªtre exact. Le passage Ã  Entity Framework 5 n'avait pas posÃ© de soucis car aucun breaking changes dans l'API n'avait bloquÃ© l'utilisation de la librairie. C'est surement ce qui explique le nombre &quot;plutÃ´t important&quot; (7500) download sur <a href="https://www.nuget.org/packages/EntityFramework.Patterns/">nuget gallery</a>.</p>
<p>Mais avec EF 6 c'est une autre histoire, tout un tas de nouvelles fonctionnalitÃ©s trÃ¨s sympa, mais aussi une api qui a pas mal bougÃ©... ainsi plusieurs utilisateurs sur <a href="https://efpatterns.codeplex.com/">codeplex</a>, m'ont tout naturellement contactÃ© pour me demander de mettre Ã  jour EntityFramework.Patterns.</p>
<p>C'est chose faite, la version 0.8 est dÃ©sormais disponible via <a href="https://www.nuget.org/packages/EntityFramework.Patterns/">nuget</a> ou sous forme <a href="https://efpatterns.codeplex.com/releases/view/114986">binaire</a> et est compatible avec la derniÃ¨re version d'EF</p>
<p>Ã‡a signifie que mes chers utilisateurs vont pouvoir profiter des gains de performances apportÃ©es par EF 6; Quant au projet sur lequel je travaille actuellement, j'espÃ¨re bien upgrader EF dÃ¨s demain... <a href="http://ryvonnet.wordpress.com/">Romain</a>, si tu m'entends :p</p>
<p>Dans un avenir proche, je pense ajouter un bout d'API asynchrone aux repository d'EntityFramework.Patterns.</p>
<p>Bon upgrade de package !!</p>
</div>]]></content:encoded></item><item><title><![CDATA[SSIS vs TPL.Dataflow]]></title><description><![CDATA[<div class="kg-card-markdown"><p>Il y a quelques jours je tweetais de joie, aprÃ¨s Ãªtre tombÃ© sur la msdn concernant <a href="http://msdn.microsoft.com/en-us/library/hh228603(v=vs.110).aspx">TPL.Dataflow</a><br>
L'API propose un systÃ¨me de pipeline que l'on peut aisÃ©ment imaginer utiliser dans un process d'ETL.</p>
<p>Ni une ni deux, je m'imagine dÃ©laisser SSII lors de mes prochaines alims de base de</p></div>]]></description><link>http://www.mymemoryleaks.fr/ssis-vs-tpl-dataflow/</link><guid isPermaLink="false">5a99b626f336bf15fc91af70</guid><dc:creator><![CDATA[Fabrice Michellonet]]></dc:creator><pubDate>Thu, 31 Oct 2013 17:18:00 GMT</pubDate><media:content url="http://mah1979.qsandbox.com/wp-content/uploads/2013/10/djoub.png" medium="image"/><content:encoded><![CDATA[<div class="kg-card-markdown"><img src="http://mah1979.qsandbox.com/wp-content/uploads/2013/10/djoub.png" alt="SSIS vs TPL.Dataflow"><p>Il y a quelques jours je tweetais de joie, aprÃ¨s Ãªtre tombÃ© sur la msdn concernant <a href="http://msdn.microsoft.com/en-us/library/hh228603(v=vs.110).aspx">TPL.Dataflow</a><br>
L'API propose un systÃ¨me de pipeline que l'on peut aisÃ©ment imaginer utiliser dans un process d'ETL.</p>
<p>Ni une ni deux, je m'imagine dÃ©laisser SSII lors de mes prochaines alims de base de donnÃ©es et enfin pouvoir unit tester mon ETL.<br>
L'accueil fait par mes collÃ¨gues purement BI fut plutÃ´t frileux... n'est ce pas David ğŸ™‚</p>
<p><img src="http://mah1979.qsandbox.com/wp-content/uploads/2013/10/djoub-300x53.png" alt="SSIS vs TPL.Dataflow"></p>
<p>Au rayon des rÃ©ponses constructives, <a href="http://fbro.wordpress.com/">Fred Brossard</a>, me fait revenir trÃ¨s vite sur terre, en demandant Ã  voir les perfs du framework.</p>
<p>C'est ce que je me propose de prÃ©senter ici avec un exemple simple.<br>
L'idÃ©e est d'importer le snapshot de <a href="http://meta.stackoverflow.com/questions/198915/is-there-a-direct-download-link-with-a-raw-data-dump-of-stack-overflow-not-a-t">septembre des posts de stackoverflow</a>; d'abord avec notre bon vieux SSIS puis avec TPL.Dataflow.</p>
<p>En entrÃ©e on a donc un bon gros fichier XML de 170MO correspondant aux nouveaux posts du mois.</p>
<p>CommenÃ§ons par SSIS, rien de sorcier, une XML source qui se dÃ©verse directement dans une SQL Destination pointant vers ma jolie table.</p>
<p><img src="http://mah1979.qsandbox.com/wp-content/uploads/2013/10/ssis-300x264.png" alt="SSIS vs TPL.Dataflow"></p>
<p>Ce qui nous donne env. 150K lignes intÃ©grÃ©es en env. 20 sec</p>
<p><img src="http://mah1979.qsandbox.com/wp-content/uploads/2013/10/ssis_executed-300x266.png" alt="SSIS vs TPL.Dataflow"><br>
<img src="http://mah1979.qsandbox.com/wp-content/uploads/2013/10/ssis_elapsed-300x36.png" alt="SSIS vs TPL.Dataflow"></p>
<p>Ok, passons Ã  la version C#. Ce que je vous livre ici est une version non optimisÃ©e et naive d'un algo d'import avec TPL.Dataflow.</p>
<p>Commencons par crÃ©er nos taches :</p>
<p>// XML datasource var inputBlock = new BufferBlock<xdocument>(); // Split xml, one for each <row> element var xDocumentToXmlRow = new TransformManyBlock&lt;XDocument, XElement&gt;( x =&gt; x.Root.DescendantNodes().OfType<xelement>()); // Convert xml <row> element to a Post object. var xmlRowToObjectBlock = new TransformBlock&lt;XElement, Post&gt;( x =&gt; x.FromXElement<post>(), new ExecutionDataflowBlockOptions {MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded}); // a buffer of 10000 elements var batch = new BatchBlock<post>(10000); // SQL destination, using bulk insert. var sqlBulk = new ActionBlock&lt;Post[]&gt;(x =&gt; { using (SqlBulkCopy sbc = new SqlBulkCopy(&quot;Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=Stackoverflow;Data Source=(local)&quot;, SqlBulkCopyOptions.TableLock)) { sbc.DestinationTableName = &quot;Posts&quot;; // Number of records to be processed in one go sbc.BatchSize = 10000; // commit to the server sbc.WriteToServer(x.ToList().ToDataTable()); sbc.Close(); } }, new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded });</post></post></row></xelement></row></xdocument></p>
<p>Il nous faut maintenant ordonnancer ces taches, comme nous le faisons dans SSIS en reliant les taches entre elles.</p>
<p>using (inputBlock.LinkTo(xDocumentToXmlRow)) using (xDocumentToXmlRow.LinkTo(xmlRowToObjectBlock)) using (xmlRowToObjectBlock.LinkTo(batch)) using (batch.LinkTo(sqlBulk)) { inputBlock.Completion.ContinueWith(t =&gt; xDocumentToXmlRow.Complete()); xDocumentToXmlRow.Completion.ContinueWith(t =&gt; xmlRowToObjectBlock.Complete()); xmlRowToObjectBlock.Completion.ContinueWith(t =&gt; batch.Complete()); batch.Completion.ContinueWith(t =&gt; sqlBulk.Complete()); var inputfile = XDocument.Load(@&quot;C:!PoCStackoverflowSourcefilesPosts.xml&quot;); inputBlock.Post(inputfile); inputBlock.Complete(); sqlBulk.Completion.Wait(); }</p>
<p>Aller, sans plus attendre, voici le rÃ©sultat de lâ€™exÃ©cution :</p>
<p><img src="http://mah1979.qsandbox.com/wp-content/uploads/2013/10/TPL.Dataflow_executed-300x83.png" alt="SSIS vs TPL.Dataflow"></p>
<p>Je suis sur que vous Ãªtes aussi Ã©tonnÃ©s que moi... TPL est plus rapide (de quelques 15%) par rapport Ã  SSIS dans ce cas simple.<br>
Pour Ãªtre tout Ã  fait franc, je ne m'y attendais pas du tout. Je pensais qu'il y aurait vraisemblablement une 20 aine de % d'Ã©cart, mais en faveur de SSIS.</p>
<p>Bien que cet exemple simplissime ne puisse pas permettre de gÃ©nÃ©raliser, TPL.Dataflow semble apporter des performances suffisantes, si non meilleures qu'SSIS;<br>
mais surtout, cet API va nous permettre dâ€™Ã©crire des tests unitaires sur nos jobs d'intÃ©gration. C'est ce que je vous prÃ©senterai dans un prochain article.</p>
<p>Et vous, avez vous dÃ©jÃ  utilisÃ© TPL.Dataflow? Pourriez-vous l'utiliser dans vos projets? A la lumiÃ¨re de ce post, que pensez vous de ces performances?</p>
</div>]]></content:encoded></item></channel></rss>
