<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Kibana : Explorez vos données.</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css@v=b603fda4ce.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/prism.css@v=b603fda4ce.css" />
    <link href="https://fonts.googleapis.com/css?family=Lato:100,100i,300,300i,400,400i,700,700i,900,900i" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i" rel="stylesheet">

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="amp/index.html" />
    
    <meta property="og:site_name" content="mymemoryleaks" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Kibana : Explorez vos données." />
    <meta property="og:description" content="Cet article fait partie d’une sérié dédiée à Elasticsearch, reportez vous à l’article sommaire pour accéder facilement aux autres posts. Kibana est la brique de visualisation qui gravite autour d’Elasticsearch. Voici, quelques exemple de représentations faites avec Kibana : L’exploration de données et la réalisation de dashboard" />
    <meta property="og:url" content="http://www.mymemoryleaks.fr/kibana-explorez-vos-donnees/" />
    <meta property="og:image" content="http://mah1979.qsandbox.com/wp-content/uploads/2014/12/kibana1.png" />
    <meta property="article:published_time" content="2014-12-23T09:39:00.000Z" />
    <meta property="article:modified_time" content="2018-02-11T22:55:14.000Z" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Kibana : Explorez vos données." />
    <meta name="twitter:description" content="Cet article fait partie d’une sérié dédiée à Elasticsearch, reportez vous à l’article sommaire pour accéder facilement aux autres posts. Kibana est la brique de visualisation qui gravite autour d’Elasticsearch. Voici, quelques exemple de représentations faites avec Kibana : L’exploration de données et la réalisation de dashboard" />
    <meta name="twitter:url" content="http://www.mymemoryleaks.fr/kibana-explorez-vos-donnees/" />
    <meta name="twitter:image" content="http://mah1979.qsandbox.com/wp-content/uploads/2014/12/kibana1.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Fabrice Michellonet" />
    <meta name="twitter:site" content="@mymemoryleaks" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "mymemoryleaks",
        "logo": "http://www.mymemoryleaks.fr/content/images/2018/03/mosquito.png"
    },
    "author": {
        "@type": "Person",
        "name": "Fabrice Michellonet",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/65244b78c89aff8f81952bd8a452ac0a?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "http://www.mymemoryleaks.fr/author/fabrice/",
        "sameAs": []
    },
    "headline": "Kibana : Explorez vos données.",
    "url": "http://www.mymemoryleaks.fr/kibana-explorez-vos-donnees/",
    "datePublished": "2014-12-23T09:39:00.000Z",
    "dateModified": "2018-02-11T22:55:14.000Z",
    "image": "http://mah1979.qsandbox.com/wp-content/uploads/2014/12/kibana1.png",
    "description": "Cet article fait partie d’une sérié dédiée à Elasticsearch, reportez vous à l’article sommaire pour accéder facilement aux autres posts. Kibana est la brique de visualisation qui gravite autour d’Elasticsearch. Voici, quelques exemple de représentations faites avec Kibana : L’exploration de données et la réalisation de dashboard",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://www.mymemoryleaks.fr/"
    }
}
    </script>

    <script type="text/javascript" src="../public/ghost-sdk.js@v=b603fda4ce"></script>
<script type="text/javascript">
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "a44cbdccbe24"
});
</script>
    <meta name="generator" content="Ghost 1.21" />
    <link rel="alternate" type="application/rss+xml" title="mymemoryleaks" href="../rss/index.html" />
</head>
<body class="post-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home"><a href="../index.html">Home</a></li>
    </ul>
        <a class="subscribe-button icon-feed" href="../rss/index.html">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head " style="background-image: url(http://mah1979.qsandbox.com/wp-content/uploads/2014/12/kibana1.png)">
    <div class="main-header-background-square"></div>
    <nav class="main-nav overlay clearfix">
        <a class="blog-logo" href="../index.html"><img src="../content/images/2018/03/mosquito.png" alt="mymemoryleaks" /></a>
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post">

        <header class="post-header">
            <h1 class="post-title">Kibana : Explorez vos données.</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2014-12-23">23 December 2014</time> 
            </section>
        </header>

        <section class="post-content">
            <div class="kg-card-markdown"><p>Cet article fait partie d’une sérié dédiée à <a href="http://www.elasticsearch.org/">Elasticsearch</a>, reportez vous à <a href="http://mah1979.qsandbox.com/serie-elasticsearch/">l’article sommaire</a> pour accéder facilement aux autres posts.</p>
<p><a href="http://www.elasticsearch.org/overview/kibana/">Kibana</a> est la brique de visualisation qui gravite autour d’Elasticsearch. Voici, quelques exemple de représentations faites avec Kibana :</p>
<p><a href="http://2.bp.blogspot.com/-4kq3k0UkJlg/VJL7YBWhIwI/AAAAAAAAJB0/9JVdU2Iiqs8/s1600/kibana1.png" title="1"><br>
<img src="http://2.bp.blogspot.com/-4kq3k0UkJlg/VJL7YBWhIwI/AAAAAAAAJB0/9JVdU2Iiqs8/s1600/kibana1.png" alt=""><br>
</a><br>
<a href="http://4.bp.blogspot.com/-bhF7rAOdIWk/VJL7YDyzhLI/AAAAAAAAJB4/rkHhggrLNrs/s1600/kibana2.png" title="2"><br>
<img src="http://4.bp.blogspot.com/-bhF7rAOdIWk/VJL7YDyzhLI/AAAAAAAAJB4/rkHhggrLNrs/s1600/kibana2.png" alt="Kibana 2"><br>
</a><br>
<a href="http://1.bp.blogspot.com/-n8gAeiLX1ys/VJL7YBl092I/AAAAAAAAJCA/SodVO4jCNeI/s1600/kibana3.png" title="3"><br>
<img src="http://1.bp.blogspot.com/-n8gAeiLX1ys/VJL7YBl092I/AAAAAAAAJCA/SodVO4jCNeI/s1600/kibana3.png" alt="Kibana 3"><br>
</a></p>
<p>L’exploration de données et la réalisation de dashboard ne nécessitent aucun code, ce qui permet de donner la main aux fonctionnels ; De plus Kibana et Elastocsearch permettent d’avoir des rapports real time, se mettant à jour à mesure que les données sont stockées.</p>
<p>Pour les lecteurs qui connaissent bien la stack SQL Serveur, on pourrait le comparer à un Report Builder sous stéroïdes et surtout qui tiendrait (mieux) ses promesses de simplicités et d’accessibilité pour les non-techniciens</p>
<p>Je me propose dans ce billet de découvrir ensemble les fonctionnalités de « data discovering » sur un <a href="https://www.data.gouv.fr/fr/datasets/base-de-donnees-des-accidents-corporels-de-la-circulation/">dataset public</a> recensant les accidents corporels de la circulation</p>
<p>Si ces données vous intéressent, je vous invite d’ailleurs à jeter un œil à la très bonne session (<a href="https://www.youtube.com/watch?v=2rB7CbCVb1U">video</a>, <a href="https://onedrive.live.com/?cid=11D07374EB30D233&amp;id=11D07374EB30D233%21915">slides</a>) de <a href="http://patriceharel.blogspot.com/">Patrice Harel</a> sur le mining avec SSAS et qui s’appui sur le même jeu de données.</p>
<h1 id="installation">Installation</h1>
<p>Commençons par l’installation qui comme pour les autres composants de la stack est triviale :<br>
Tout commence évidement par le téléchargement du binaire <a href="http://www.elasticsearch.org/overview/kibana/installation/">ici</a>, suivi de la décompression de l’archive.<br>
Si votre instance elasticsearh ne tourne pas sur le même serveur qui hébergera Kibana ou si elle écoute sur un port non standard, il vous faudra modifier le fichier de configuration config/kibana.yml.<br>
Dans mon cas, je ne touche à rien!<br>
Puis à l’aide d’une fenêtre commande, il nous faudra exécuter /bin/kibana après s’être placé dans le répertoire ou a été décompressé l’archive.<br>
Finalement pointons notre navigateur sur l’url <a href="http://mah1979.qsandbox.com/#">http://localhost:5601</a></p>
<h1 id="exploration">Exploration</h1>
<p>S’il s’agit de la première fois que vous lancez Kibana, cet écran vous sera présenté, dans lequel il vous faudra choisir un index (équivalent de base de données) ainsi qu’une colonne typée date.<br>
Ce dernier point est extrêmement important, car Kibana part du principe qu’il est naturel pour l’esprit humain et plus facile de découvrir des données lorsqu’elles sont représentées sur une frise.<br>
<a href="http://1.bp.blogspot.com/-Z810eCg254A/VJL94zZOHZI/AAAAAAAAJCQ/8Z7RV0Y646s/s1600/kibana_configIndex.png" title="configure"><br>
<img src="http://1.bp.blogspot.com/-Z810eCg254A/VJL94zZOHZI/AAAAAAAAJCQ/8Z7RV0Y646s/s1600/kibana_configIndex.png" alt=""><br>
</a><br>
Dans notre dataset, nous ne disposons malheureusement pas de la date de l’accident, qui aurait été le candidat idéal en tant que « time field ».<br>
Pour l’exemple, nous nous rabattrons sur le champ @timestamp représentant l’instant ou a été inséré l’événement dans notre index.</p>
<p>On se retrouve propulsé dans nos données via l’écran suivant :<br>
<a href="http://2.bp.blogspot.com/-kmVU6veyAE0/VJL-Sxl_dwI/AAAAAAAAJCY/V6IOfdp5XuE/s1600/kibana_zones.png" title="explore"><br>
<img src="http://2.bp.blogspot.com/-kmVU6veyAE0/VJL-Sxl_dwI/AAAAAAAAJCY/V6IOfdp5XuE/s1600/kibana_zones.png" alt=""><br>
</a><br>
On reconnait très vite plusieurs sections dans cette interface :</p>
<ul>
<li>La colonne de gauche qui contient les champs à disposition (1).</li>
<li>Tout en haut (2), une zone de filtre ; n’oublions pas qu’elasticsearch est un moteur de recherche…</li>
<li>L’indicateur du nombre d’enregistrements après filtrage (3).</li>
<li>La frise temporelle sur laquelle on regarde les événements (4).</li>
<li>Finalement la vue tableau de données au centre. Notons que pour l’instant elle nous représente la version brute des données, car nous n’avons pas encore choisit de colonnes à afficher.</li>
</ul>
<p>Commençons par cliquer sur les barres du graph afin d’effectuer un drilldown au niveau temps.<br>
<a href="http://4.bp.blogspot.com/-IiU8s0EQj9k/VJL_V6DIH1I/AAAAAAAAJCk/rbUVL-Eq8Tw/s1600/kibana_timeseries.png" title="times series"><br>
<img src="http://4.bp.blogspot.com/-IiU8s0EQj9k/VJL_V6DIH1I/AAAAAAAAJCk/rbUVL-Eq8Tw/s1600/kibana_timeseries.png" alt=""><br>
</a><br>
Instantanément cela nous permet de découvrir la répartition des data dans le temps. Notez, que les clics que nous avons fait sur le graph sont interprétés comme une clause de filtrage, diminuant les événements auxquels on s’intéresse.</p>
<p>Pour avoir un aperçu du contenu des champs, je vous conseille de cliquer sur le nom d'un champ dans la colonne de gauche ; comme ceci :</p>
<p><img src="http://1.bp.blogspot.com/-F0lPUUYf2Ug/VJL_0oFOkmI/AAAAAAAAJCs/mELz1DPeLXs/s1600/kibana_FieldCount.png" alt=""></p>
<p>Les informations et actions présentées ici sont une vraie mine d’or.<br>
En plus d'un premier comptage des données sous-jacentes, on peut par exemple se concentrer sur les événements qui ont eu lieu sur l’A31 en cliquant sur l'icone loupe+. Evidemment, la frise temporelle et les données sont mis à jour.<br>
<a href="http://1.bp.blogspot.com/-pe2N46v18dE/VJMBPbsDBdI/AAAAAAAAJC4/GBDGOuzcuAo/s1600/kibana_filteredtimeseries.png" title="time series"><br>
<img src="http://1.bp.blogspot.com/-pe2N46v18dE/VJMBPbsDBdI/AAAAAAAAJC4/GBDGOuzcuAo/s1600/kibana_filteredtimeseries.png" alt=""><br>
</a></p>
<p>Maintenant, intéressons nous au champ tbl qui représente le nombre de blessés légers dans un accident.</p>
<p><img src="http://2.bp.blogspot.com/-J8qQtRTTLmk/VJMCR51JDmI/AAAAAAAAJDE/Nax3m2JrEuY/s1600/kibana_tbl.png" alt=""></p>
<p>En cliquant sur « Visualize », on obtient la répartition top 20, sous forme d’histogramme, du nombre de blessés légers sur l’ensemble des événements de la base.<br>
<a href="http://1.bp.blogspot.com/-42EKGG1e31g/VJMCs3vORDI/AAAAAAAAJDM/XfSnLY2gK0M/s1600/kibana_visualize.png" title="Visualize"><br>
<img src="http://1.bp.blogspot.com/-42EKGG1e31g/VJMCs3vORDI/AAAAAAAAJDM/XfSnLY2gK0M/s1600/kibana_visualize.png" alt=""><br>
</a><br>
Ici aussi cette visualisation, nous permet d’appréhender rapidement la teneur de nos données.</p>
<p>Finalement jetons un œil, au filtre qui se trouve tout en haut de l’interface de Kibana. Par défaut, vous y trouverez une *. Attention, il n’y a pas ici d’analogie avec SQL, ici l’étoile signifie sans filtre.<br>
Nous pourrions par exemple nous intéresser à une commune en particulier, celle de Cergy par exemple (95002). Il nous suffira pour ce faire de saisir le filtre suivant :</p>
<p>codeinsee:=95002</p>
<p><a href="http://4.bp.blogspot.com/-MH9KuJdcVgE/VJMJZbCPthI/AAAAAAAAJDk/47EQjYENWWI/s1600/kibana_QueryEqual.png" title="Equals filter"><br>
<img src="http://4.bp.blogspot.com/-MH9KuJdcVgE/VJMJZbCPthI/AAAAAAAAJDk/47EQjYENWWI/s1600/kibana_QueryEqual.png" alt=""><br>
</a><br>
Ou bien les accidents impliquant plus de 2 morts</p>
<p>ttué:&gt;2</p>
<p><a href="http://2.bp.blogspot.com/-Mdsx4ZiSjXw/VJMKCSepodI/AAAAAAAAJDs/leAErdXX-YE/s1600/kibana_QueryGreater.png" title="Greater filter"><br>
<img src="http://2.bp.blogspot.com/-Mdsx4ZiSjXw/VJMKCSepodI/AAAAAAAAJDs/leAErdXX-YE/s1600/kibana_QueryGreater.png" alt=""><br>
</a><br>
Ou encore les accidents impliquant plus de 2 morts dans l’Oise :</p>
<p>ttué:&gt;2 AND codeinsee [60000 TO 69999]</p>
<p><a href="http://3.bp.blogspot.com/-H-sa9wi4IHc/VJMIlgo0inI/AAAAAAAAJDc/QS_ApVYRcyI/s1600/kibana_QueryRange.png" title="Range filter"><br>
<img src="http://3.bp.blogspot.com/-H-sa9wi4IHc/VJMIlgo0inI/AAAAAAAAJDc/QS_ApVYRcyI/s1600/kibana_QueryRange.png" alt=""><br>
</a></p>
<p>Voila qui clos ce premier article sur Kibana, en espérant vous avoir donné envie d’essayer ce superbe outil.</p>
</div>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/fabrice/index.html" style="background-image: url(http://www.gravatar.com/avatar/65244b78c89aff8f81952bd8a452ac0a?s&)"><span class="hidden">Fabrice Michellonet's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/fabrice/index.html">Fabrice Michellonet</a></h4>

                    <p>Read <a href="../author/fabrice/index.html">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Kibana%20%3A%20Explorez%20vos%20donn%C3%A9es.&amp;url=http://www.mymemoryleaks.fr/kibana-explorez-vos-donnees/"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.mymemoryleaks.fr/kibana-explorez-vos-donnees/"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://www.mymemoryleaks.fr/kibana-explorez-vos-donnees/"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>
        <div id="disqus_thread"></div>
    </article>
</main>

<aside class="read-next">
    <a class="read-next-story " style="background-image: url(http://mah1979.qsandbox.com/wp-content/uploads/2015/06/bbb_overview.png)" href="../beaglebone-black-du-carton-a-mono/index.html">
        <section class="post">
            <h2>BeagleBone Black du carton à Mono</h2>
            <p>L’IOT, on en parle partout, de plus en plus ; évidemment l’univers Microsoft n’est pas en retrait&hellip;</p>
        </section>
    </a>
    <a class="read-next-story prev no-cover" href="../serie-elasticsearch/index.html">
        <section class="post">
            <h2>Série Elasticsearch</h2>
            <p>Ce post fait office de sommaire à toute une série d’articles que j’ai bon espoir d’écrire&hellip;</p>
        </section>
    </a>
</aside>



<script>
var disqus_config = function () {
this.page.url = 'http://www.mymemoryleaks.fr/kibana-explorez-vos-donnees/';  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = 'ghost-27'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://www-mymemoryleaks-fr.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="../index.html">mymemoryleaks</a> &copy; 2018</section>
            <section class="poweredby">Powered by <a href="http://boo-demo.tenoku.com/">Ghost + Boo</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    
    <script type="text/javascript" src="../assets/js/jquery.fitvids.js@v=b603fda4ce"></script>
    <script type="text/javascript" src="../assets/js/index.js@v=b603fda4ce"></script>
    <script type="text/javascript" src="../assets/js/prism.js@v=b603fda4ce"></script>
    <script src="https://cdn.jsdelivr.net/mobile-detect.js/1.3.3/mobile-detect.min.js"></script>
    <script src="https://npmcdn.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>

</body>
</html>
